var g=Object.defineProperty;var v=(c,e,n)=>e in c?g(c,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):c[e]=n;var m=(c,e,n)=>v(c,typeof e!="symbol"?e+"":e,n);import{c as S,K as F}from"./index-viK6OPoB.js";/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const x=S("Folder",[["path",{d:"M20 20a2 2 0 0 0 2-2V8a2 2 0 0 0-2-2h-7.9a2 2 0 0 1-1.69-.9L9.6 3.9A2 2 0 0 0 7.93 3H4a2 2 0 0 0-2 2v13a2 2 0 0 0 2 2Z",key:"1kt360"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const j=S("Settings",[["path",{d:"M12.22 2h-.44a2 2 0 0 0-2 2v.18a2 2 0 0 1-1 1.73l-.43.25a2 2 0 0 1-2 0l-.15-.08a2 2 0 0 0-2.73.73l-.22.38a2 2 0 0 0 .73 2.73l.15.1a2 2 0 0 1 1 1.72v.51a2 2 0 0 1-1 1.74l-.15.09a2 2 0 0 0-.73 2.73l.22.38a2 2 0 0 0 2.73.73l.15-.08a2 2 0 0 1 2 0l.43.25a2 2 0 0 1 1 1.73V20a2 2 0 0 0 2 2h.44a2 2 0 0 0 2-2v-.18a2 2 0 0 1 1-1.73l.43-.25a2 2 0 0 1 2 0l.15.08a2 2 0 0 0 2.73-.73l.22-.39a2 2 0 0 0-.73-2.73l-.15-.08a2 2 0 0 1-1-1.74v-.5a2 2 0 0 1 1-1.74l.15-.09a2 2 0 0 0 .73-2.73l-.22-.38a2 2 0 0 0-2.73-.73l-.15.08a2 2 0 0 1-2 0l-.43-.25a2 2 0 0 1-1-1.73V4a2 2 0 0 0-2-2z",key:"1qme2f"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]]);class w{constructor(e){m(this,"root",[]);e&&(this.root=e)}readFile(e){const n=this.findItemByPath(e);return n&&n.type==="file"?n.content:void 0}writeFile(e,n){const l=this.findItemByPath(e);l&&l.type==="file"&&(l.content=n)}listDir(e){const n=this.findItemByPath(e);return n&&n.type==="folder"&&n.children?n.children:[]}deleteFile(e){}initFromData(e){this.root=e}serialize(){return JSON.parse(JSON.stringify(this.root))}findById(e){const n=l=>{for(const t of l){if(t.id===e)return t;if(t.children){const r=n(t.children);if(r)return r}}};return n(this.root)}listChildrenById(e){const n=this.findById(e);return n&&n.type==="folder"&&n.children?n.children:[]}findItemByPath(e){if(!e||e==="/")return{type:"folder",name:"/",id:"root",children:this.root};const n=e.split("/").filter(Boolean);let l={type:"folder",name:"/",id:"root",children:this.root};for(const t of n){if(!l||l.type!=="folder"||!l.children)return;l=l.children.find(r=>r.name===t)}return l}}const B=new w;function O(c){const e={};for(const l of c){const t=l.id.split("/");let r=e,o="";for(let s=0;s<t.length;s++){const i=t[s];o=o?`${o}/${i}`:i,s===t.length-1?r[i]={...l,name:i,id:o}:(r[i]||(r[i]={id:o,name:i,type:"folder",children:{}}),r[i].children||(r[i].children={}),r=r[i].children)}}function n(l){return Object.values(l).map(t=>t.type==="folder"?{...t,children:n(t.children)}:t)}return n(e)}async function I(){try{const e=await fetch("/portfolio/shadow-manifest.json");if(!e.ok)throw new Error("Failed to load shadow-manifest.json");const n=await e.json(),l=await Promise.all(n.map(async t=>{if(t.type==="file"){const o=`/portfolio/${t.contentPath.replace(/^\//,"")}`,i=await(await fetch(o)).text();let d;return t.name.endsWith(".js")||t.name.endsWith(".jsx")?d="javascript":t.name.endsWith(".ts")||t.name.endsWith(".tsx")?d="typescript":t.name.endsWith(".css")?d="css":t.name.endsWith(".html")?d="html":t.name.endsWith(".json")&&(d="json"),{id:t.id,name:t.name,type:"file",content:i,language:d}}return{id:t.id,name:t.name,type:"folder",children:[]}}));return O(l)}catch(c){return console.error("Failed to load shadow folder:",c),[]}}const W=F(c=>({fs:{id:"root",name:"My Computer",type:"folder",children:[]},init:async()=>{const e=await I();c({fs:{id:"root",name:"My Computer",type:"folder",children:e}})},addItems:(e,n)=>c(l=>{var o;const t=JSON.parse(JSON.stringify(l.fs));let r=t;for(let s=1;s<e.length;s++){const i=(o=r.children)==null?void 0:o.find(d=>d.id===e[s]);if(!i)return{fs:t};r=i}return r.children=[...r.children||[],...n],{fs:t}}),renameItem:(e,n,l)=>c(t=>{var i,d;const r=JSON.parse(JSON.stringify(t.fs));let o=r;for(let f=1;f<e.length;f++){const h=(i=o.children)==null?void 0:i.find(u=>u.id===e[f]);if(!h)return{fs:r};o=h}const s=(d=o.children)==null?void 0:d.find(f=>f.id===n);return s&&(s.name=l),{fs:r}}),deleteItem:(e,n)=>c(l=>{var o,s;const t=JSON.parse(JSON.stringify(l.fs));let r=t;for(let i=1;i<e.length;i++){const d=(o=r.children)==null?void 0:o.find(f=>f.id===e[i]);if(!d)return{fs:t};r=d}return r.children=(s=r.children)==null?void 0:s.filter(i=>i.id!==n),{fs:t}}),moveItem:(e,n,l)=>c(t=>{var d,f,h,u;const r=JSON.parse(JSON.stringify(t.fs));let o=r;for(let a=1;a<e.length;a++){const y=(d=o.children)==null?void 0:d.find(p=>p.id===e[a]);if(!y)return{fs:r};o=y}const s=(f=o.children)==null?void 0:f.find(a=>a.id===n);if(!s)return{fs:r};o.children=(h=o.children)==null?void 0:h.filter(a=>a.id!==n);let i=r;for(let a=1;a<l.length;a++){const y=(u=i.children)==null?void 0:u.find(p=>p.id===l[a]);if(!y)return{fs:r};i=y}return i.children=[...i.children||[],s],{fs:r}}),updateFileContent:(e,n,l)=>c(t=>{var i,d;const r=JSON.parse(JSON.stringify(t.fs));let o=r;for(let f=1;f<e.length;f++){const h=(i=o.children)==null?void 0:i.find(u=>u.id===e[f]);if(!h)return{fs:r};o=h}const s=(d=o.children)==null?void 0:d.find(f=>f.id===n);return s&&s.type==="file"&&(s.content=l),{fs:r}})}));export{x as F,j as S,w as V,W as u,B as v};
