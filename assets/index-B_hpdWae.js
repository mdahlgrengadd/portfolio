const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["assets/index-CEHaoG1y.js","assets/monaco-editor-DkIPtwFA.js","assets/monaco-editor-BDeR4Fir.css","assets/index-27QJtfJz.css"])))=>i.map(i=>d[i]);
import{_ as e,m as t,l as n}from"./monaco-editor-DkIPtwFA.js";import{c as s,a as r,r as i,j as a,X as l,R as o,k as c,o as d,q as u,l as f,P as h,p,s as m,D as g,H as y,I as v,C as b,g as x,J as w,K as j}from"./index-CEHaoG1y.js";import{u as k,v as E}from"./fileSystem-B2L0zjH7.js";import{V as N}from"./fileSystem-B2L0zjH7.js";import{S as T}from"./search-B6prIhMK.js";import{F as _}from"./file-text-C78T7yEL.js";import{F as C,S as P}from"./settings-CBna9QvL.js";import{L as S,B as $,I,t as D,C as A,v as R,w as O,x as F,y as V,z as B,D as M,E as U,F as L,k as W,G as z,R as G,H as q,J as H,K as J}from"./MacroContext-DUx98eZu.js";import{B as Y,S as K}from"./save-CkrPhPZ-.js";import{D as X,a as Q,b as Z,c as ee,d as te,A as ne,T as se,e as re,f as ie,Z as ae}from"./dialog-CiRmlDoj.js";import{L as le}from"./label-vftldnw3.js";import{T as oe}from"./textarea-B--iOvRH.js";import{U as ce}from"./upload-B-ek0tRn.js";import{S as de}from"./square-Bi7qivpM.js";import{P as ue}from"./play-DsPhlJGh.js";import{B as fe}from"./badge-N5OMSLVb.js";import{R as he}from"./refresh-cw-CI727kQA.js";
/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const pe=s("Bell",[["path",{d:"M6 8a6 6 0 0 1 12 0c0 7 3 9 3 9H3s3-2 3-9",key:"1qo2s2"}],["path",{d:"M10.3 21a1.94 1.94 0 0 0 3.4 0",key:"qgo35s"}]]),me=s("Bot",[["path",{d:"M12 8V4H8",key:"hb8ula"}],["rect",{width:"16",height:"12",x:"4",y:"8",rx:"2",key:"enze0r"}],["path",{d:"M2 14h2",key:"vft8re"}],["path",{d:"M20 14h2",key:"4cs60a"}],["path",{d:"M15 13v2",key:"1xurst"}],["path",{d:"M9 13v2",key:"rq6x2g"}]]),ge=s("Briefcase",[["path",{d:"M16 20V4a2 2 0 0 0-2-2h-4a2 2 0 0 0-2 2v16",key:"jecpp"}],["rect",{width:"20",height:"14",x:"2",y:"6",rx:"2",key:"i6l2r4"}]]),ye=s("Database",[["ellipse",{cx:"12",cy:"5",rx:"9",ry:"3",key:"msslwz"}],["path",{d:"M3 5V19A9 3 0 0 0 21 19V5",key:"1wlel7"}],["path",{d:"M3 12A9 3 0 0 0 21 12",key:"mv7ke4"}]]),ve=s("FileCode",[["path",{d:"M10 12.5 8 15l2 2.5",key:"1tg20x"}],["path",{d:"m14 12.5 2 2.5-2 2.5",key:"yinavb"}],["path",{d:"M14 2v4a2 2 0 0 0 2 2h4",key:"tnqrlb"}],["path",{d:"M15 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7z",key:"1mlx9k"}]]),be=s("FolderOpen",[["path",{d:"m6 14 1.5-2.9A2 2 0 0 1 9.24 10H20a2 2 0 0 1 1.94 2.5l-1.54 6a2 2 0 0 1-1.95 1.5H4a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h3.9a2 2 0 0 1 1.69.9l.81 1.2a2 2 0 0 0 1.67.9H18a2 2 0 0 1 2 2v2",key:"usdka0"}]]),xe=s("GitBranch",[["line",{x1:"6",x2:"6",y1:"3",y2:"15",key:"17qcm7"}],["circle",{cx:"18",cy:"6",r:"3",key:"1h7g24"}],["circle",{cx:"6",cy:"18",r:"3",key:"fqmcym"}],["path",{d:"M18 9a9 9 0 0 1-9 9",key:"n2h4wq"}]]),we=s("Github",[["path",{d:"M15 22v-4a4.8 4.8 0 0 0-1-3.5c3 0 6-2 6-5.5.08-1.25-.27-2.48-1-3.5.28-1.15.28-2.35 0-3.5 0 0-1 0-3 1.5-2.64-.5-5.36-.5-8 0C6 2 5 2 5 2c-.3 1.15-.3 2.35 0 3.5A5.403 5.403 0 0 0 4 9c0 3.5 3 5.5 6 5.5-.39.49-.68 1.05-.85 1.65-.17.6-.22 1.23-.15 1.85v4",key:"tonef"}],["path",{d:"M9 18c-4.51 2-5-2-7-2",key:"9comsn"}]]),je=s("LayoutGrid",[["rect",{width:"7",height:"7",x:"3",y:"3",rx:"1",key:"1g98yp"}],["rect",{width:"7",height:"7",x:"14",y:"3",rx:"1",key:"6d4xhi"}],["rect",{width:"7",height:"7",x:"14",y:"14",rx:"1",key:"nxv5o0"}],["rect",{width:"7",height:"7",x:"3",y:"14",rx:"1",key:"1bb6yr"}]]),ke=s("Lightbulb",[["path",{d:"M15 14c.2-1 .7-1.7 1.5-2.5 1-.9 1.5-2.2 1.5-3.5A6 6 0 0 0 6 8c0 1 .2 2.2 1.5 3.5.7.7 1.3 1.5 1.5 2.5",key:"1gvzjb"}],["path",{d:"M9 18h6",key:"x1upvd"}],["path",{d:"M10 22h4",key:"ceow96"}]]),Ee=s("Star",[["path",{d:"M11.525 2.295a.53.53 0 0 1 .95 0l2.31 4.679a2.123 2.123 0 0 0 1.595 1.16l5.166.756a.53.53 0 0 1 .294.904l-3.736 3.638a2.123 2.123 0 0 0-.611 1.878l.882 5.14a.53.53 0 0 1-.771.56l-4.618-2.428a2.122 2.122 0 0 0-1.973 0L6.396 21.01a.53.53 0 0 1-.77-.56l.881-5.139a2.122 2.122 0 0 0-.611-1.879L2.16 9.795a.53.53 0 0 1 .294-.906l5.165-.755a2.122 2.122 0 0 0 1.597-1.16z",key:"r04s7s"}]]),Ne={activeView:"explorer",sidebarVisible:!0,panelVisible:!1,previewPanelVisible:!1,activeTab:null,tabs:[],theme:"dark",commandPaletteOpen:!1,buildOutput:"",buildError:null,isBuilding:!1,buildCode:"",panelVisibilityBeforePreview:!1},Te=r(((t,n)=>({...Ne,toggleSidebar:()=>t((e=>({sidebarVisible:!e.sidebarVisible}))),togglePanel:()=>t((e=>({panelVisible:!e.panelVisible}))),togglePreviewPanel:()=>t((n=>{const s=!n.previewPanelVisible;return e((async()=>{const{ideSettings:e}=await import("./esbuild-settings-Bzyyd_qg.js");return{ideSettings:e}}),[]).then((({ideSettings:e})=>{e.hideTerminalDuringPreview&&t(s?e=>({panelVisibilityBeforePreview:e.panelVisible,panelVisible:!1}):e=>({panelVisible:e.panelVisibilityBeforePreview}))})),{previewPanelVisible:s}})),toggleCommandPalette:()=>t((e=>({commandPaletteOpen:!e.commandPaletteOpen}))),setActiveView:e=>t({activeView:e}),setActiveTab:e=>t({activeTab:e}),openTab:e=>{const s=n().getFileById(e);s&&"file"===s.type&&t((t=>{const n=t.tabs.find((t=>t.fileId===e));if(n)return{activeTab:n.id};const r={id:`tab-${Date.now()}`,fileId:e,title:s.name,language:s.language||"javascript",isDirty:!1};return{tabs:[...t.tabs,r],activeTab:r.id}}))},closeTab:e=>{t((t=>{const n=t.tabs.findIndex((t=>t.id===e));if(-1===n)return t;const s=t.tabs.filter((t=>t.id!==e));let r=t.activeTab;return t.activeTab===e&&(r=0===s.length?null:n<s.length?s[n].id:s[s.length-1].id),{tabs:s,activeTab:r}}))},toggleTheme:()=>t((e=>({theme:"dark"===e.theme?"light":"dark"}))),getFileById:e=>{const t=n=>{if(n.id===e)return n;if(n.children)for(const e of n.children){const n=t(e);if(n)return n}},n=k.getState().fs;return t(n)},getTabById:e=>n().tabs.find((t=>t.id===e)),setTabDirty:(e,n)=>{t((t=>({tabs:t.tabs.map((t=>t.id===e?{...t,isDirty:n}:t))})))},saveFile:(e,n)=>{const s=(t,n=["root"])=>{if(t.id===e)return n;if(!t.children)return null;for(const e of t.children){const t=s(e,[...n,e.id]);if(t)return t}return null},r=k.getState().fs,i=s(r);if(i){const s=i.slice(0,-1);k.getState().updateFileContent(s,e,n),t((t=>({tabs:t.tabs.map((t=>t.fileId===e?{...t,isDirty:!1}:t))})))}},setBuildOutput:e=>t({buildOutput:e}),setBuildError:e=>t({buildError:e}),setBuildCode:e=>t({buildCode:e}),setIsBuilding:e=>t({isBuilding:e}),runBuild:async t=>{const s=n(),{ideSettings:r}=await e((async()=>{const{ideSettings:e}=await import("./esbuild-settings-Bzyyd_qg.js");return{ideSettings:e}}),[]);!r.showTerminalOnBuild||s.previewPanelVisible||s.panelVisible||s.togglePanel();const{buildCode:i,parseEsbuildCommand:a,addToVirtualFs:l}=await e((async()=>{const{buildCode:e,parseEsbuildCommand:t,addToVirtualFs:n}=await Promise.resolve().then((()=>Gt));return{buildCode:e,parseEsbuildCommand:t,addToVirtualFs:n}}),void 0);s.setIsBuilding(!0),s.setBuildError(null),s.setBuildOutput(""),s.setBuildCode("");const o=(()=>{if(!s.activeTab)return null;const e=s.getTabById(s.activeTab);if(!e)return null;const t=s.getFileById(e.fileId);return t&&"file"===t.type?{filePath:t.id,content:t.content||""}:null})();if(!o)return s.setBuildError("No active file to build"),void s.setIsBuilding(!1);const c=(e,t="")=>{const n=e.id;"file"===e.type&&void 0!==e.content&&l(n,e.content),"folder"===e.type&&e.children&&e.children.forEach((e=>{c(e,n)}))},d=k.getState().fs;let u;if(c(d),t){if(u=a(t),!u)return s.setBuildError("Invalid esbuild command"),void s.setIsBuilding(!1);u.content=o.content}else u={entryPoint:o.filePath,content:o.content,options:{bundle:!0,minify:!0,format:"esm"}};try{const e=await i(u);e.error?s.setBuildError(e.error):(s.setBuildCode(e.code),s.setBuildOutput(`Build successful!\nOutput: ${e.code.slice(0,1e3)}${e.code.length>1e3?"...":""}`),r.autoFocusPreview&&s.previewPanelVisible&&"preview"!==s.activeTab&&s.setActiveTab("preview"))}catch(f){const e=f instanceof Error?f.message:String(f);s.setBuildError(`Build failed: ${e}`)}finally{s.setIsBuilding(!1)}},publishAppWithData:async(t,s)=>{var r,i,a,l,o;const c=n(),{buildCode:d,addToVirtualFs:u}=await e((async()=>{const{buildCode:e,addToVirtualFs:t}=await Promise.resolve().then((()=>Gt));return{buildCode:e,addToVirtualFs:t}}),void 0),{toast:f}=await e((async()=>{const{toast:e}=await import("./index-CEHaoG1y.js").then((e=>e.ab));return{toast:e}}),__vite__mapDeps([0,1,2,3]));c.setIsBuilding(!0),c.setBuildError(null);const h=(()=>{const e=s||c.activeTab;if(!e)return null;const t=c.getTabById(e);if(!t)return null;const n=c.getFileById(t.fileId);return n&&"file"===n.type?{filePath:n.id,fileName:n.name,content:n.content||""}:null})();if(!h)return c.setBuildError("No active file to publish"),c.setIsBuilding(!1),void f({title:"Publish Failed",description:"No active file to publish",variant:"destructive"});try{const e=c.buildCode;let n;if(e&&!c.buildError)n={code:e,error:null};else{const e=(t,n="")=>{const s=t.id;"file"===t.type&&void 0!==t.content&&u(s,t.content),"folder"===t.type&&t.children&&t.children.forEach((t=>{e(t,s)}))},t=k.getState().fs;e(t);const s={entryPoint:h.filePath,content:h.content,options:{bundle:!0,minify:!0,format:"esm"}};n=await d(s)}if(n.error)return c.setBuildError(n.error),void f({title:"Publish Failed",description:"Build failed: "+n.error,variant:"destructive"});const s=k.getState(),p=["root"],m="published-apps",g=`published-app-${t.name}-${Date.now()}`;let y=s.fs,v=null==(r=y.children)?void 0:r.find((e=>e.id===m));if(!v){const e={id:m,name:"Published Apps",type:"folder",children:[]};s.addItems(p,[e]);if(y=k.getState().fs,v=null==(i=y.children)?void 0:i.find((e=>e.id===m)),!v)throw new Error("Failed to create Published Apps folder")}const b=null==(a=null==v?void 0:v.children)?void 0:a.find((e=>e.name===`${t.name}.exe`));b&&s.deleteItem([...p,m],b.id);const x=[{id:`${g}-index.html`,name:"index.html",type:"file",content:`<!DOCTYPE html>\n<html lang="en">\n<head>\n    <meta charset="UTF-8">\n    <meta name="viewport" content="width=device-width, initial-scale=1.0">\n    <title>${t.name}</title>\n    <meta name="description" content="${t.description}">\n    <meta name="author" content="${t.author}">\n</head>\n<body>\n    <div id="app"></div>\n    <script type="module" src="./app.js"><\/script>\n</body>\n</html>`},{id:`${g}-app.js`,name:"app.js",type:"file",content:n.code},{id:`${g}-package.json`,name:"package.json",type:"file",content:JSON.stringify({name:t.name.toLowerCase().replace(/\s+/g,"-"),version:t.version,description:t.description,main:"app.js",type:"module",author:t.author,category:t.category,publishedAt:(new Date).toISOString(),sourceFile:h.fileName},null,2)}],w={id:g,name:`${t.name}.exe`,type:"folder",children:x};s.addItems([...p,m],[w]);const j=null==(l=k.getState().fs.children)?void 0:l.find((e=>e.id===m));null==(o=null==j?void 0:j.children)||o.find((e=>e.name===`${t.name}.exe`));f({title:"App Published Successfully!",description:`${t.name}.exe has been published to the Published Apps folder`,variant:"default"}),c.setBuildOutput(`App published successfully!\nName: ${t.name}.exe\nVersion: ${t.version}\nLocation: Published Apps/${t.name}.exe\nFiles created: index.html, app.js, package.json`)}catch(p){const e=p instanceof Error?p.message:String(p);c.setBuildError(`Publish failed: ${e}`),f({title:"Publish Failed",description:e,variant:"destructive"})}finally{c.setIsBuilding(!1)}},publishApp:async()=>{var t;const s=n(),{buildCode:r,addToVirtualFs:i}=await e((async()=>{const{buildCode:e,addToVirtualFs:t}=await Promise.resolve().then((()=>Gt));return{buildCode:e,addToVirtualFs:t}}),void 0),{toast:a}=await e((async()=>{const{toast:e}=await import("./index-CEHaoG1y.js").then((e=>e.ab));return{toast:e}}),__vite__mapDeps([0,1,2,3]));s.setIsBuilding(!0),s.setBuildError(null);const l=(()=>{if(!s.activeTab)return null;const e=s.getTabById(s.activeTab);if(!e)return null;const t=s.getFileById(e.fileId);return t&&"file"===t.type?{filePath:t.id,fileName:t.name,content:t.content||""}:null})();if(!l)return s.setBuildError("No active file to publish"),s.setIsBuilding(!1),void a({title:"Publish Failed",description:"No active file to publish",variant:"destructive"});try{const e=(t,n="")=>{const s=t.id;"file"===t.type&&void 0!==t.content&&i(s,t.content),"folder"===t.type&&t.children&&t.children.forEach((t=>{e(t,s)}))},n=k.getState().fs;e(n);const o={entryPoint:l.filePath,content:l.content,options:{bundle:!0,minify:!0,format:"esm"}},c=await r(o);if(c.error)return s.setBuildError(c.error),void a({title:"Publish Failed",description:"Build failed: "+c.error,variant:"destructive"});const d=l.fileName.replace(/\.[^/.]+$/,""),u=`published-app-${d}-${Date.now()}`,f="published-apps",h=k.getState(),p=["root"],m=h.fs;if(!(null==(t=m.children)?void 0:t.find((e=>e.id===f)))){const e={id:f,name:"Published Apps",type:"folder",children:[]};h.addItems(p,[e])}const g=[{id:`${u}-index.html`,name:"index.html",type:"file",content:`<!DOCTYPE html>\n<html lang="en">\n<head>\n    <meta charset="UTF-8">\n    <meta name="viewport" content="width=device-width, initial-scale=1.0">\n    <title>${d}</title>\n</head>\n<body>\n    <div id="app"></div>\n    <script type="module" src="./app.js"><\/script>\n</body>\n</html>`},{id:`${u}-app.js`,name:"app.js",type:"file",content:c.code},{id:`${u}-package.json`,name:"package.json",type:"file",content:JSON.stringify({name:d.toLowerCase().replace(/\s+/g,"-"),version:"1.0.0",description:`Published app: ${d}`,main:"app.js",type:"module",publishedAt:(new Date).toISOString(),sourceFile:l.fileName},null,2)}],y={id:u,name:`${d}.exe`,type:"folder",children:g};h.addItems([...p,f],[y]),a({title:"App Published Successfully!",description:`${d}.exe has been published to the Published Apps folder`,variant:"default"}),s.setBuildOutput(`App published successfully!\nName: ${d}.exe\nLocation: Published Apps/${d}.exe\nFiles created: index.html, app.js, package.json`)}catch(o){const e=o instanceof Error?o.message:String(o);s.setBuildError(`Publish failed: ${e}`),a({title:"Publish Failed",description:e,variant:"destructive"})}finally{s.setIsBuilding(!1)}}}))),_e=Object.freeze(Object.defineProperty({__proto__:null,default:Te},Symbol.toStringTag,{value:"Module"})),Ce=[{id:"toggle-sidebar",title:"View: Toggle Side Bar",category:"View",shortcut:"Ctrl+B",handler:()=>Te.getState().toggleSidebar()},{id:"toggle-terminal",title:"View: Toggle Terminal",category:"View",shortcut:"Ctrl+`",handler:()=>Te.getState().togglePanel()},{id:"toggle-preview",title:"View: Toggle Preview",category:"View",shortcut:"Ctrl+Shift+V",handler:()=>Te.getState().togglePreviewPanel()},{id:"toggle-theme",title:"Preferences: Toggle Theme",category:"Preferences",handler:()=>Te.getState().toggleTheme()},{id:"build-active-file",title:"Build: Bundle Active File",category:"Build",handler:()=>{Te.getState().togglePreviewPanel()}},{id:"build-bundle-app",title:"Build: Bundle App (app.jsx)",category:"Build",handler:()=>{Te.getState().togglePreviewPanel()}}],Pe=()=>{const{commandPaletteOpen:e,toggleCommandPalette:t}=Te(),[n,s]=i.useState(""),[r,l]=i.useState(Ce),[o,c]=i.useState(0),d=i.useRef(null);i.useEffect((()=>{if(!n)return void l(Ce);const e=n.toLowerCase(),t=Ce.filter((t=>t.title.toLowerCase().includes(e)||t.category&&t.category.toLowerCase().includes(e)));l(t),c(0)}),[n]),i.useEffect((()=>{e&&d.current&&d.current.focus()}),[e]);const u=e=>{t(),e.handler()};return e?a.jsx("div",{className:"command-palette",onClick:()=>t(),children:a.jsxs("div",{className:"command-palette-content animate-fade-in",onClick:e=>e.stopPropagation(),children:[a.jsxs("div",{className:"flex items-center px-3 py-2 bg-input border-b border-border",children:[a.jsx(T,{size:16,className:"mr-2 text-muted-foreground"}),a.jsx("input",{ref:d,type:"text",className:"w-full bg-transparent outline-none placeholder:text-muted-foreground",placeholder:"Type a command or search...",value:n,onChange:e=>s(e.target.value),onKeyDown:e=>{switch(e.key){case"ArrowDown":e.preventDefault(),c((e=>e<r.length-1?e+1:e));break;case"ArrowUp":e.preventDefault(),c((e=>e>0?e-1:e));break;case"Enter":e.preventDefault(),u(r[o]);break;case"Escape":e.preventDefault(),t()}}})]}),a.jsx("div",{className:"command-palette-results",children:r.length>0?r.map(((e,t)=>a.jsxs("div",{className:"command-palette-item "+(t===o?"selected":""),onClick:()=>u(e),onMouseEnter:()=>c(t),children:[a.jsx("span",{className:"flex-1",children:e.title}),e.category&&a.jsx("span",{className:"text-xs text-muted-foreground mr-2",children:e.category}),e.shortcut&&a.jsx("kbd",{className:"bg-muted text-muted-foreground px-2 py-0.5 text-xs rounded",children:e.shortcut})]},e.id))):a.jsx("div",{className:"p-3 text-muted-foreground",children:"No commands found"})})]})}):null};
/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */function Se(e){return new Worker("/portfolio/assets/editor.worker-kQdP5fky.js",{type:"module",name:null==e?void 0:e.name})}function $e(e){return new Worker("/portfolio/assets/css.worker-DGem8QqD.js",{type:"module",name:null==e?void 0:e.name})}function Ie(e){return new Worker("/portfolio/assets/html.worker-DxzcS6ro.js",{type:"module",name:null==e?void 0:e.name})}function De(e){return new Worker("/portfolio/assets/json.worker-DRgd4wWm.js",{type:"module",name:null==e?void 0:e.name})}function Ae(e){return new Worker("/portfolio/assets/ts.worker-CgJPfcjf.js",{type:"module",name:null==e?void 0:e.name})}window.MonacoEnvironment={getWorker:(e,t)=>"json"===t?new De:"css"===t||"scss"===t||"less"===t?new $e:"html"===t||"handlebars"===t||"razor"===t?new Ie:"typescript"===t||"javascript"===t?new Ae:new Se},n.typescript.typescriptDefaults.setCompilerOptions({target:n.typescript.ScriptTarget.ES2020,allowNonTsExtensions:!0,moduleResolution:n.typescript.ModuleResolutionKind.NodeJs,module:n.typescript.ModuleKind.ESNext,noEmit:!0,esModuleInterop:!0,jsx:n.typescript.JsxEmit.React,reactNamespace:"React",allowJs:!0,typeRoots:["node_modules/@types"]}),n.typescript.typescriptDefaults.addExtraLib('declare module "*.css" { const content: string; export default content; }',"global.d.ts");const Re=Object.freeze(Object.defineProperty({__proto__:null,default:t},Symbol.toStringTag,{value:"Module"})),Oe=()=>{const e=[{icon:_,text:"New File...",color:"text-blue-400"},{icon:be,text:"Open File...",color:"text-blue-400"},{icon:C,text:"Open Folder...",color:"text-blue-400"},{icon:xe,text:"Clone Git Repository...",color:"text-blue-400"},{icon:S,text:"Connect to...",color:"text-blue-400"},{icon:ge,text:"New Workspace with Copilot...",color:"text-blue-400"}],t=[{icon:Ee,text:"Get started with HS Code",subtitle:"Customize your editor, learn the basics, and start coding",badge:null,selected:!0},{icon:me,text:"Getting Started with Container Tools",subtitle:null,badge:"New"},{icon:ke,text:"Learn the Fundamentals",subtitle:null,badge:null},{icon:Y,text:"Get Started With GitLens",subtitle:null,badge:"Updated"},{icon:we,text:"GitHub Copilot",subtitle:null,badge:"Updated"}];return a.jsx("div",{className:"bg-gray-900 h-full flex flex-col p-4",children:a.jsxs("div",{className:"bg-gray-900 text-gray-100 w-full max-w-6xl mx-auto flex-1 flex flex-col p-8 font-sans",children:[a.jsxs("div",{className:"mb-12",children:[a.jsx("h1",{className:"text-4xl font-light text-gray-200 mb-2",children:"HybrIDE Studio Code"}),a.jsx("p",{className:"text-gray-400 text-lg",children:"Editing involved"})]}),a.jsxs("div",{className:"flex gap-16 flex-1 min-h-0",children:[a.jsxs("div",{className:"flex-1 overflow-y-auto",children:[a.jsxs("div",{className:"mb-8",children:[a.jsx("h2",{className:"text-xl font-medium text-gray-200 mb-4",children:"Start"}),a.jsx("div",{className:"space-y-1",children:e.map(((e,t)=>a.jsxs("div",{className:"flex items-center gap-3 px-2 py-1 rounded hover:bg-gray-800 cursor-pointer",children:[a.jsx(e.icon,{size:16,className:e.color}),a.jsx("span",{className:`text-sm ${e.color}`,children:e.text})]},t)))})]}),a.jsxs("div",{children:[a.jsx("h2",{className:"text-xl font-medium text-gray-200 mb-4",children:"Recent"}),a.jsxs("div",{className:"space-y-1",children:[[{name:"Lab4",path:"D:\\AI_DVA264_Lab3_RandomRestart"},{name:"AI_DVA264_Lab3_RandomRestart",path:"D:\\"},{name:"Lab4",path:"D:\\"},{name:"draggable-desktop-dreamscape",path:"C:\\Users\\mdahl\\Documents\\GitHub"},{name:"prometheos-3d",path:"D:\\"}].map(((e,t)=>a.jsxs("div",{className:"px-2 py-1 rounded hover:bg-gray-800 cursor-pointer",children:[a.jsx("div",{className:"text-sm text-blue-400",children:e.name}),a.jsx("div",{className:"text-xs text-gray-500",children:e.path})]},t))),a.jsx("div",{className:"px-2 py-1 text-sm text-blue-400 hover:bg-gray-800 cursor-pointer rounded",children:"More..."})]})]})]}),a.jsxs("div",{className:"flex-1 overflow-y-auto",children:[a.jsx("h2",{className:"text-xl font-medium text-gray-200 mb-4",children:"Walkthroughs"}),a.jsxs("div",{className:"space-y-2",children:[t.map(((e,t)=>a.jsxs("div",{className:"flex items-start gap-3 p-3 rounded-lg cursor-pointer transition-colors "+(e.selected?"bg-blue-600 hover:bg-blue-700":"hover:bg-gray-800"),children:[a.jsx("div",{className:"flex-shrink-0 mt-1",children:a.jsx("div",{className:"w-8 h-8 rounded-full flex items-center justify-center "+(e.selected?"bg-blue-500":"bg-gray-700"),children:a.jsx(e.icon,{size:16,className:"text-white"})})}),a.jsxs("div",{className:"flex-1 min-w-0",children:[a.jsxs("div",{className:"flex items-center gap-2 mb-1",children:[a.jsx("span",{className:"text-sm font-medium text-gray-100",children:e.text}),e.badge&&a.jsx("span",{className:"px-2 py-0.5 text-xs bg-blue-600 text-white rounded-full",children:e.badge})]}),e.subtitle&&a.jsx("p",{className:"text-xs text-gray-300",children:e.subtitle})]})]},t))),a.jsx("div",{className:"px-3 py-2 text-sm text-blue-400 hover:bg-gray-800 cursor-pointer rounded",children:"More..."})]})]})]})]})})},Fe=({open:e,onClose:t,currentFileName:n,previewTabId:s})=>{const{publishAppWithData:r,isBuilding:o}=Te(),c=k((e=>e.fs)),[d,u]=i.useState({name:"",description:"",version:"1.0.0",author:"",category:"Utility"}),[f,h]=i.useState(null),[p,m]=i.useState(!1);i.useEffect((()=>{if(e&&n){const e=n.replace(/\.[^/.]+$/,"");u((t=>({...t,name:e})))}}),[e,n]),i.useEffect((()=>{var e;if(!d.name)return h(null),void m(!1);const t=null==(e=c.children)?void 0:e.find((e=>"published-apps"===e.id));if(null==t?void 0:t.children){const e=t.children.find((e=>e.name===`${d.name}.exe`));e?(h(e.name),m(!1)):(h(null),m(!1))}}),[d.name,c]);const g=(e,t)=>{u((n=>({...n,[e]:t})))},y=()=>{m(!1),t()};return a.jsx(X,{open:e,onOpenChange:y,children:a.jsxs(Q,{className:"sm:max-w-md",children:[a.jsxs(Z,{children:[a.jsxs(ee,{className:"flex items-center justify-between",children:["Publish App",a.jsx($,{variant:"ghost",size:"sm",onClick:y,className:"h-6 w-6 p-0",children:a.jsx(l,{size:16})})]}),a.jsx(te,{children:"Publish your app to the Published Apps folder for easy access."})]}),a.jsxs("div",{className:"space-y-4",children:[a.jsxs("div",{className:"space-y-2",children:[a.jsx(le,{htmlFor:"name",children:"App Name"}),a.jsx(I,{id:"name",value:d.name,onChange:e=>g("name",e.target.value),placeholder:"Enter app name"})]}),a.jsxs("div",{className:"space-y-2",children:[a.jsx(le,{htmlFor:"description",children:"Description"}),a.jsx(oe,{id:"description",value:d.description,onChange:e=>g("description",e.target.value),placeholder:"Brief description of your app",rows:3})]}),a.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[a.jsxs("div",{className:"space-y-2",children:[a.jsx(le,{htmlFor:"version",children:"Version"}),a.jsx(I,{id:"version",value:d.version,onChange:e=>g("version",e.target.value),placeholder:"1.0.0"})]}),a.jsxs("div",{className:"space-y-2",children:[a.jsx(le,{htmlFor:"category",children:"Category"}),a.jsx(I,{id:"category",value:d.category,onChange:e=>g("category",e.target.value),placeholder:"Utility"})]})]}),a.jsxs("div",{className:"space-y-2",children:[a.jsx(le,{htmlFor:"author",children:"Author"}),a.jsx(I,{id:"author",value:d.author,onChange:e=>g("author",e.target.value),placeholder:"Your name"})]}),f&&!p&&a.jsxs(ne,{children:[a.jsx(se,{className:"h-4 w-4"}),a.jsxs(re,{children:['An app named "',f,'" already exists. Click Publish again to overwrite it.']})]}),f&&p&&a.jsxs(ne,{variant:"destructive",children:[a.jsx(se,{className:"h-4 w-4"}),a.jsxs(re,{children:['Warning: This will overwrite the existing app "',f,'". This action cannot be undone.']})]})]}),a.jsxs(ie,{className:"flex gap-2",children:[a.jsx($,{variant:"outline",onClick:y,children:"Cancel"}),a.jsx($,{onClick:async()=>{if(d.name.trim())if(!f||p)try{await r(d,s),t(),u({name:"",description:"",version:"1.0.0",author:"",category:"Utility"}),m(!1)}catch(e){}else m(!0)},disabled:o||!d.name.trim(),children:o?"Publishing...":p?"Confirm Overwrite":"Publish"})]})]})})},Ve=({previewTabId:e})=>{const{buildCode:t,buildError:n,getTabById:s,getFileById:r}=Te(),l=i.useRef(null),[o,c]=i.useState(!1);return i.useEffect((()=>{if(!t||n)return;const e=t||"console.log('No build output available');";if(!l.current)return;const s=l.current.contentDocument;s&&(s.open(),s.write(`\n      <!DOCTYPE html>\n      <html>\n      <head>\n        <meta charset="UTF-8">\n        <meta name="viewport" content="width=device-width, initial-scale=1.0">\n        <title>Preview</title>\n        <style>\n          body { font-family: sans-serif; margin: 0; padding: 16px; }\n        </style>\n      </head>\n      <body>\n        <div id="app"></div>\n        <script type="text/javascript">\n          try {\n            ${e}\n          } catch (err) {\n            document.body.innerHTML = '<div style="color: red; padding: 20px;"><h3>Runtime Error:</h3><pre>' + err.message + '</pre></div>';\n          }        <\/script>\n      </body>\n      </html>\n    `),s.close())}),[t,n]),a.jsxs("div",{className:"panel-area flex flex-col",style:{height:"100%",minHeight:0,maxHeight:"none"},children:[a.jsx("div",{className:"flex flex-col flex-1 relative",children:a.jsxs("div",{className:"relative h-full",children:[a.jsx("iframe",{ref:l,title:"Preview",className:"w-full h-full border-none bg-white"}),t&&!n&&a.jsx("div",{className:"absolute top-4 right-4",children:a.jsxs($,{onClick:()=>c(!0),className:"bg-green-600 hover:bg-green-700 text-white shadow-lg",size:"sm",children:[a.jsx(ce,{size:16,className:"mr-1"}),"Publish"]})}),n&&a.jsx("div",{className:"absolute inset-0 flex items-center justify-center bg-red-50",children:a.jsxs("div",{className:"text-red-600 p-4 text-center",children:[a.jsx("h3",{children:"Build Error"}),a.jsx("pre",{className:"text-sm mt-2 whitespace-pre-wrap",children:n})]})})," ",!t&&!n&&a.jsx("div",{className:"absolute inset-0 flex items-center justify-center bg-gray-50",children:a.jsxs("div",{className:"text-gray-500 text-center",children:[a.jsx("h3",{className:"text-lg mb-2",children:"Preview Panel"}),a.jsx("p",{children:'Click "Run Preview" to see your code in action'})]})})]})}),a.jsx(Fe,{open:o,onClose:()=>c(!1),currentFileName:(()=>{if(!e)return;const t=s(e);if(!t)return;const n=r(t.fileId);return null==n?void 0:n.name})(),previewTabId:e})]})},Be=()=>{const{tabs:t,activeTab:n,closeTab:s,setActiveTab:r,panelVisible:o,previewPanelVisible:c,theme:d,setTabDirty:u,saveFile:f,togglePreviewPanel:h,getTabById:p,runBuild:m}=Te(),[g,y]=i.useState({}),[v,b]=i.useState(!1),x=i.useRef({}),w=i.useRef({}),[j,k]=i.useState(null);i.useEffect((()=>{let t;const s=[],r=[],i=w.current;return n&&(async n=>{const{getFileById:i,getTabById:a}=Te.getState(),l=a(n);if(!l)return;const o=i(l.fileId);if(!o||!o.content)return;if(!t){const n=await e((()=>Promise.resolve().then((()=>Re))),void 0);t=n.default}const c=x.current[n];if(!c)return;const f=t.editor.create(c,{value:o.content,language:l.language,theme:"dark"===d?"vs-dark":"vs",automaticLayout:!0,minimap:{enabled:!0},scrollBeyondLastLine:!1,fontSize:14,fontFamily:"JetBrains Mono, monospace"});w.current[n]=f,f.layout(),document.fonts&&document.fonts.ready?document.fonts.ready.then((()=>f.layout())):setTimeout((()=>f.layout()),100);const h=()=>f.layout();window.addEventListener("resize",h),r.push((()=>window.removeEventListener("resize",h))),s.push(f.onDidFocusEditorText((()=>f.layout()))),s.push(f.onDidChangeModelContent((()=>{const e=f.getValue();y((t=>({...t,[n]:e}))),u(n,!0)})))})(n),t&&t.editor&&(t.editor.setTheme("dark"===d?"vs-dark":"vs"),Object.values(w.current).forEach((e=>e.layout()))),()=>{r.forEach((e=>e())),s.forEach((e=>e.dispose())),t&&t.editor&&(Object.keys(i).forEach((e=>{const t=i[e];t&&t.dispose()})),t.editor.getModels().forEach((e=>e.dispose())))}}),[n,d,u]),i.useEffect((()=>{if(n&&w.current[n]){const e=w.current[n];setTimeout((()=>{e.layout(),e.focus()}),10)}}),[n]),i.useEffect((()=>{c?(n&&"preview"!==n&&k(n),r("preview")):("preview"===n&&j&&r(j),k(null))}),[c,n,j,r]);return i.useEffect((()=>{!c&&v&&b(!1)}),[c,v]),i.useEffect((()=>{(async()=>{const{ideSettings:t}=await e((async()=>{const{ideSettings:e}=await import("./esbuild-settings-Bzyyd_qg.js");return{ideSettings:e}}),[]);if(!t.hideTerminalDuringPreview)return;const{panelVisible:s,panelVisibilityBeforePreview:r,togglePanel:i}=Te.getState();"preview"===n?s&&(Te.setState({panelVisibilityBeforePreview:!0}),s&&i()):n&&"preview"!==n&&r&&!s&&(i(),Te.setState({panelVisibilityBeforePreview:!1}))})()}),[n]),a.jsxs("div",{className:"editor-area",children:[t.length>0||c?a.jsxs(a.Fragment,{children:[a.jsx("div",{className:"editor-tabs",children:a.jsxs("div",{className:"flex items-center justify-between w-full",children:[a.jsxs("div",{className:"flex",children:[t.map((e=>a.jsxs("div",{className:"editor-tab "+(n===e.id?"active":""),onClick:()=>r(e.id),children:[a.jsx("span",{className:"truncate flex-1",children:e.title}),e.isDirty&&a.jsx("span",{className:"ml-1 text-amber-400",children:"•"}),a.jsx("button",{className:"ml-2 text-blue-500 hover:text-blue-400",onClick:t=>{t.stopPropagation(),(e=>{const t=w.current[e];if(!t)return;const n=Te.getState().tabs.find((t=>t.id===e));n&&f(n.fileId,t.getValue())})(e.id)},title:"Save",children:a.jsx(K,{size:14})}),a.jsx("button",{className:"ml-2 hover:text-foreground",onClick:t=>{t.stopPropagation(),s(e.id)},children:a.jsx(l,{size:16})})]},e.id))),c&&j&&(()=>{const e=p(j),t=e?`Preview - ${e.title}`:"Preview";return a.jsxs("div",{className:"editor-tab "+("preview"===n?"active":""),onClick:()=>r("preview"),children:[a.jsx("span",{className:"truncate flex-1",children:t}),a.jsx("button",{className:"ml-2 hover:text-foreground",onClick:e=>{e.stopPropagation(),h()},children:a.jsx(l,{size:16})})]},"preview")})()]}),n&&"preview"!==n&&a.jsx("button",{className:"px-3 py-1 rounded text-sm flex items-center gap-1 mr-2 "+(v?"bg-red-600 hover:bg-red-700 text-white":"bg-green-600 hover:bg-green-700 text-white"),onClick:async()=>{if(v)return b(!1),void(c&&h());await m(),b(!0),c||h()},title:v?"Stop":"Run",children:v?a.jsxs(a.Fragment,{children:[a.jsx(de,{size:14}),"Stop Preview"]}):a.jsxs(a.Fragment,{children:[a.jsx(ue,{size:14}),"Run"]})})]})}),a.jsxs("div",{className:"editor-content",children:[t.map((e=>a.jsx("div",{ref:t=>x.current[e.id]=t,className:"h-full w-full",style:{display:n===e.id?"block":"none"},"data-tab-id":e.id},e.id))),c&&j&&a.jsx("div",{className:"h-full w-full",style:{display:"preview"===n?"block":"none"},children:a.jsx(Ve,{previewTabId:j})},"preview")]})]}):a.jsx("div",{className:"h-full",children:a.jsx(Oe,{})}),o&&a.jsx(Me,{})]})},Me=()=>{const{togglePanel:e,buildOutput:t,buildError:n,isBuilding:s,runBuild:r,togglePreviewPanel:o}=Te(),[c,d]=i.useState("terminal"),[u,f]=i.useState("");i.useEffect((()=>{(t||n||s)&&d("output")}),[t,n,s]);return a.jsxs("div",{className:"panel-area flex flex-col h-1/3 border-t border-sidebar-border",children:[a.jsxs("div",{className:"flex items-center border-b border-sidebar-border p-1",children:[a.jsxs("div",{className:"flex space-x-2",children:[a.jsx("button",{className:"px-2 "+("terminal"===c?"border-b-2 border-foreground":""),onClick:()=>d("terminal"),children:"Terminal"}),a.jsx("button",{className:"px-2 "+("output"===c?"border-b-2 border-foreground":""),onClick:()=>d("output"),children:"Output"})]}),a.jsx("button",{className:"ml-auto text-sidebar-foreground hover:text-foreground p-1",onClick:e,children:a.jsx(l,{size:16})})]}),a.jsxs("div",{className:"flex-1 p-2 font-mono text-sm overflow-auto",children:["terminal"===c&&a.jsx("div",{className:"text-muted-foreground",children:"~ $"})," ","output"===c&&a.jsxs("div",{children:[a.jsx("div",{className:"mb-2",children:a.jsx("input",{type:"text",placeholder:(()=>{const{activeTab:e,getTabById:t,getFileById:n}=Te.getState();if(!e)return"esbuild app.js --bundle --minify --format=esm";const s=t(e);if(!s)return"esbuild app.js --bundle --minify --format=esm";const r=n(s.fileId);return r&&"file"===r.type?`esbuild ${r.id} --bundle --minify --format=esm`:"esbuild app.js --bundle --minify --format=esm"})(),value:u,className:"w-full bg-input text-foreground px-2 py-1 rounded text-sm font-mono",onChange:e=>f(e.target.value),onKeyDown:e=>{"Enter"===e.key&&(async e=>{e.startsWith("esbuild ")&&(await r(e),f(""))})(e.currentTarget.value)}})}),s&&a.jsx("div",{className:"text-blue-500 mb-2",children:"Building..."}),n&&a.jsx("div",{className:"bg-destructive/10 text-destructive p-2 rounded whitespace-pre-wrap overflow-auto mb-2",children:n}),!n&&t&&a.jsx("div",{className:"text-xs font-mono bg-sidebar-accent p-2 rounded overflow-auto",children:a.jsx("pre",{className:"whitespace-pre-wrap",children:t})}),!s&&!n&&!t&&a.jsx("div",{className:"text-muted-foreground",children:"Enter an esbuild command above or run preview to see build output here"})]})]})]})},Ue=()=>{const{sidebarVisible:e,previewPanelVisible:t,activeView:n}=Te(),s=i.useRef(null),[r,l]=i.useState(!1),[o,c]=i.useState(0),[d,u]=i.useState(0),[f,h]=i.useState(240);i.useEffect((()=>{const e=e=>{if(!r)return;const t=e.clientX-o,n=Math.max(200,Math.min(500,d+t));h(n),s.current&&(s.current.style.width=`${n}px`)},t=()=>{l(!1),document.body.style.cursor="",document.body.style.userSelect=""};return r&&(document.addEventListener("mousemove",e),document.addEventListener("mouseup",t),document.body.style.cursor="col-resize",document.body.style.userSelect="none"),()=>{document.removeEventListener("mousemove",e),document.removeEventListener("mouseup",t)}}),[r,o,d]);return!e||t?null:a.jsxs("div",{ref:s,className:"side-bar relative flex flex-col",style:{width:`${f}px`},children:[a.jsx("div",{className:"p-2 font-medium flex items-center justify-between border-b border-sidebar-border",children:a.jsxs("div",{className:"uppercase text-xs tracking-wider",children:["explorer"===n&&"Explorer","search"===n&&"Search","git"===n&&"Source Control","extensions"===n&&"Extensions"]})}),a.jsxs("div",{className:"px-2 py-1 flex-1 overflow-auto",children:["explorer"===n&&a.jsx(Le,{}),"search"===n&&a.jsx(ze,{}),"git"===n&&a.jsx(Ge,{}),"extensions"===n&&a.jsx(qe,{})]}),a.jsx("div",{className:"resize-handle",onMouseDown:e=>{var t;l(!0),c(e.clientX),u((null==(t=s.current)?void 0:t.offsetWidth)||240),e.preventDefault()}})]})},Le=()=>{var e,t;const n=k((e=>e.fs)),s=null==(e=n.children)?void 0:e.find((e=>".vfsignore"===e.name&&"file"===e.type)),r=i.useMemo((()=>s&&s.content?s.content.split(/\r?\n/).map((e=>e.trim())).filter((e=>e&&!e.startsWith("#"))):[]),[s]),l=i.useMemo((()=>r.map((e=>{const t=e.endsWith("/");let n=(t?e.slice(0,-1):e).replace(/\*\*/g,".*").replace(/\*/g,"[^/]*").replace(/\?/g,".");return t&&(n=`${n}(/.*)?`),new RegExp(`^${n}$`)}))),[r]),o=[...(null==(t=n.children)?void 0:t.filter((e=>".vfsignore"!==e.name&&!l.some((t=>t.test(e.id))))))||[]].sort(((e,t)=>e.type!==t.type?"folder"===e.type?-1:1:e.name.localeCompare(t.name)));return a.jsx("div",{className:"explorer-tree",children:o.map((e=>a.jsx(We,{item:e,level:0,ignoreMatchers:l},e.id)))})},We=({item:e,level:t,ignoreMatchers:n})=>{const[s,r]=o.useState(!0),{openTab:i}=Te();return a.jsxs("div",{children:[a.jsx("div",{className:"tree-item",onClick:()=>{"file"===e.type?i(e.id):r(!s)},style:{paddingLeft:20*t+4+"px"},children:a.jsxs("span",{className:"flex items-center",children:["folder"===e.type&&a.jsx("span",{className:"mr-1 text-sidebar-foreground",onClick:t=>{t.stopPropagation(),"folder"===e.type&&r(!s)},children:s?a.jsx(D,{size:16}):a.jsx(A,{size:16})}),"folder"===e.type?a.jsx(C,{size:16,className:"mr-1 text-sidebar-foreground"}):a.jsx(_,{size:16,className:"mr-1 text-sidebar-foreground"}),a.jsx("span",{className:"truncate",children:e.name})]})}),s&&"folder"===e.type&&e.children&&a.jsx("div",{children:[...e.children.filter((e=>".vfsignore"!==e.name&&!n.some((t=>t.test(e.id)))))].sort(((e,t)=>e.type!==t.type?"folder"===e.type?-1:1:e.name.localeCompare(t.name))).map((e=>a.jsx(We,{item:e,level:t+1,ignoreMatchers:n},e.id)))})]})},ze=()=>a.jsxs("div",{className:"p-2",children:[a.jsx("input",{type:"text",className:"w-full p-1 bg-input rounded text-sm mb-2",placeholder:"Search in files..."}),a.jsx("div",{className:"text-sm text-muted-foreground mt-2",children:"No results found. Try searching for something."})]}),Ge=()=>a.jsxs("div",{className:"p-2",children:[a.jsx("div",{className:"text-sm font-medium mb-2",children:"Changes"}),a.jsx("div",{className:"text-sm text-muted-foreground",children:"No changes detected in your workspace."})]}),qe=()=>a.jsxs("div",{className:"p-2",children:[a.jsx("input",{type:"text",className:"w-full p-1 bg-input rounded text-sm mb-2",placeholder:"Search Extensions..."}),a.jsx("div",{className:"text-sm text-muted-foreground mt-2",children:"No extensions installed. Search for extensions in the marketplace."})]}),He=({className:e})=>{var t;const{forceReload:n}=k(),[s,r]=o.useState(!1),i=E.isInitialized(),l=E.getRootFileSystemItem().children||[],c=l.find((e=>"published-apps"===e.id));return a.jsxs(R,{className:e,children:[a.jsxs(O,{className:"pb-3",children:[a.jsxs(F,{className:"flex items-center gap-2 text-sm",children:[a.jsx(ye,{className:"w-4 h-4"}),"Virtual File System Debug"]}),a.jsx(V,{className:"text-xs",children:"Global VFS singleton status and controls"})]}),a.jsxs(B,{className:"space-y-3",children:[a.jsxs("div",{className:"flex items-center justify-between",children:[a.jsx("span",{className:"text-sm text-muted-foreground",children:"Status:"}),a.jsx(fe,{variant:i?"default":"secondary",children:i?"Initialized":"Not Initialized"})]}),a.jsxs("div",{className:"flex items-center justify-between",children:[a.jsx("span",{className:"text-sm text-muted-foreground",children:"Root Items:"}),a.jsxs("span",{className:"text-sm font-mono",children:[l.length," items"]})]}),a.jsxs("div",{className:"flex items-center justify-between",children:[a.jsx("span",{className:"text-sm text-muted-foreground",children:"Published Apps:"}),a.jsx(fe,{variant:c?"default":"secondary",children:c?`${(null==(t=c.children)?void 0:t.length)||0} apps`:"Not Found"})]}),c&&c.children&&c.children.length>0&&a.jsxs("div",{className:"border-t pt-2",children:[a.jsx("span",{className:"text-xs text-muted-foreground",children:"Published Apps:"}),a.jsx("div",{className:"mt-1 space-y-1",children:c.children.map((e=>a.jsx("div",{className:"text-xs font-mono bg-muted px-2 py-1 rounded",children:e.name},e.id)))})]}),a.jsxs("div",{className:"border-t pt-3",children:[a.jsxs($,{onClick:async()=>{if(confirm("⚠️ Force reload will destroy all runtime-created files (like published apps). Continue?")){r(!0);try{await n()}catch(e){}finally{r(!1)}}},disabled:s,variant:"destructive",size:"sm",className:"w-full",children:[s?a.jsx(he,{className:"w-3 h-3 mr-1 animate-spin"}):a.jsx(se,{className:"w-3 h-3 mr-1"}),"Force Reload from Shadow"]}),a.jsx("p",{className:"text-xs text-muted-foreground mt-1",children:"⚠️ Destroys published apps and user-created files"})]})]})]})},Je=()=>{const{theme:e,toggleTheme:t,toggleCommandPalette:n}=Te(),[s,r]=i.useState(!1);return a.jsxs("div",{className:"status-bar flex items-center px-2 text-xs",children:[" ",a.jsx("div",{className:"flex items-center",children:a.jsxs("button",{className:"flex items-center px-2 py-1 hover:bg-sidebar-accent rounded",onClick:n,children:[a.jsx(ae,{size:14,className:"mr-1"}),a.jsx("span",{children:"Command Palette"})]})}),a.jsx("div",{className:"flex-1"}),a.jsxs("div",{className:"flex items-center space-x-4",children:[a.jsxs("div",{className:"flex items-center",children:[a.jsx(xe,{size:14,className:"mr-1"}),a.jsx("span",{children:"main"})]}),a.jsx("div",{className:"flex items-center",children:a.jsx("span",{children:"Ln 1, Col 1"})}),a.jsx("div",{className:"flex items-center",children:a.jsx("span",{children:"Spaces: 2"})}),a.jsx("div",{className:"flex items-center",children:a.jsx("span",{children:"UTF-8"})}),a.jsxs(M,{open:s,onOpenChange:r,children:[a.jsx(U,{asChild:!0,children:a.jsx("button",{className:"flex items-center hover:bg-sidebar-accent px-2 py-0.5 rounded",children:a.jsx(ye,{size:14})})}),a.jsx(L,{className:"w-80",align:"end",children:a.jsx(He,{})})]}),a.jsx("button",{className:"flex items-center hover:bg-sidebar-accent px-2 py-0.5 rounded",onClick:t,children:"dark"===e?"☀️":"🌙"}),a.jsx("button",{className:"flex items-center hover:bg-sidebar-accent px-2 py-0.5 rounded",children:a.jsx(pe,{size:14})})]})]})},Ye=({initData:t})=>{const{theme:n,toggleCommandPalette:s,toggleSidebar:r,togglePanel:l,togglePreviewPanel:o,sidebarVisible:c}=Te(),d=k((e=>e.init));return i.useEffect((()=>{d()}),[d]),i.useEffect((()=>{const e=document.querySelector(".ide-builder-app");e&&(e.classList.toggle("light","light"===n),e.classList.toggle("dark","dark"===n))}),[n]),i.useEffect((()=>{const e=e=>{e.ctrlKey&&e.shiftKey&&"P"===e.key&&(e.preventDefault(),s()),e.ctrlKey&&"b"===e.key&&(e.preventDefault(),r()),e.ctrlKey&&"`"===e.key&&(e.preventDefault(),l()),e.ctrlKey&&e.shiftKey&&"V"===e.key&&(e.preventDefault(),o())};return window.addEventListener("keydown",e),()=>{window.removeEventListener("keydown",e)}}),[s,r,l,o]),i.useEffect((()=>{var n;if(t&&t.content&&!t.error&&"vfs"===t.scheme){const s=null==(n=t.initFromUrl)?void 0:n.substring(6);s&&e((async()=>{const{default:e}=await Promise.resolve().then((()=>_e));return{default:e}}),void 0).then((({default:e})=>{const{openTab:t}=e.getState();t(s)})).catch((e=>{}))}else null==t||t.error}),[t]),a.jsxs("div",{className:"ide-container",children:[c&&a.jsx(Ue,{}),a.jsx(Be,{}),a.jsx(Je,{}),a.jsx(Pe,{})]})};let Ke;const Xe=({initData:e})=>a.jsx("div",{className:"ide-builder-app h-full w-full overflow-hidden",style:{height:"100%",width:"100%"},children:a.jsx(Ye,{initData:e})}),Qe={id:W.id,manifest:W,init:async e=>{Ke=e},render:()=>a.jsx(Xe,{initData:Ke}),onOpen:e=>{e&&(Ke=e)},onClose:()=>{}};var[Ze,et]=c("Tooltip",[z]),tt=z(),nt="TooltipProvider",st=700,rt="tooltip.open",[it,at]=Ze(nt),lt=e=>{const{__scopeTooltip:t,delayDuration:n=st,skipDelayDuration:s=300,disableHoverableContent:r=!1,children:l}=e,o=i.useRef(!0),c=i.useRef(!1),d=i.useRef(0);return i.useEffect((()=>{const e=d.current;return()=>window.clearTimeout(e)}),[]),a.jsx(it,{scope:t,isOpenDelayedRef:o,delayDuration:n,onOpen:i.useCallback((()=>{window.clearTimeout(d.current),o.current=!1}),[]),onClose:i.useCallback((()=>{window.clearTimeout(d.current),d.current=window.setTimeout((()=>o.current=!0),s)}),[s]),isPointerInTransitRef:c,onPointerInTransitChange:i.useCallback((e=>{c.current=e}),[]),disableHoverableContent:r,children:l})};lt.displayName=nt;var ot="Tooltip",[ct,dt]=Ze(ot),ut=e=>{const{__scopeTooltip:t,children:n,open:s,defaultOpen:r,onOpenChange:l,disableHoverableContent:o,delayDuration:c}=e,f=at(ot,e.__scopeTooltip),h=tt(t),[p,m]=i.useState(null),g=d(),y=i.useRef(0),v=o??f.disableHoverableContent,b=c??f.delayDuration,x=i.useRef(!1),[w,j]=u({prop:s,defaultProp:r??!1,onChange:e=>{e?(f.onOpen(),document.dispatchEvent(new CustomEvent(rt))):f.onClose(),null==l||l(e)},caller:ot}),k=i.useMemo((()=>w?x.current?"delayed-open":"instant-open":"closed"),[w]),E=i.useCallback((()=>{window.clearTimeout(y.current),y.current=0,x.current=!1,j(!0)}),[j]),N=i.useCallback((()=>{window.clearTimeout(y.current),y.current=0,j(!1)}),[j]),T=i.useCallback((()=>{window.clearTimeout(y.current),y.current=window.setTimeout((()=>{x.current=!0,j(!0),y.current=0}),b)}),[b,j]);return i.useEffect((()=>()=>{y.current&&(window.clearTimeout(y.current),y.current=0)}),[]),a.jsx(G,{...h,children:a.jsx(ct,{scope:t,contentId:g,open:w,stateAttribute:k,trigger:p,onTriggerChange:m,onTriggerEnter:i.useCallback((()=>{f.isOpenDelayedRef.current?T():E()}),[f.isOpenDelayedRef,T,E]),onTriggerLeave:i.useCallback((()=>{v?N():(window.clearTimeout(y.current),y.current=0)}),[N,v]),onOpen:E,onClose:N,disableHoverableContent:v,children:n})})};ut.displayName=ot;var ft="TooltipTrigger",ht=i.forwardRef(((e,t)=>{const{__scopeTooltip:n,...s}=e,r=dt(ft,n),l=at(ft,n),o=tt(n),c=i.useRef(null),d=f(t,c,r.onTriggerChange),u=i.useRef(!1),m=i.useRef(!1),g=i.useCallback((()=>u.current=!1),[]);return i.useEffect((()=>()=>document.removeEventListener("pointerup",g)),[g]),a.jsx(q,{asChild:!0,...o,children:a.jsx(h.button,{"aria-describedby":r.open?r.contentId:void 0,"data-state":r.stateAttribute,...s,ref:d,onPointerMove:p(e.onPointerMove,(e=>{"touch"!==e.pointerType&&(m.current||l.isPointerInTransitRef.current||(r.onTriggerEnter(),m.current=!0))})),onPointerLeave:p(e.onPointerLeave,(()=>{r.onTriggerLeave(),m.current=!1})),onPointerDown:p(e.onPointerDown,(()=>{r.open&&r.onClose(),u.current=!0,document.addEventListener("pointerup",g,{once:!0})})),onFocus:p(e.onFocus,(()=>{u.current||r.onOpen()})),onBlur:p(e.onBlur,r.onClose),onClick:p(e.onClick,r.onClose)})})}));ht.displayName=ft;var[pt,mt]=Ze("TooltipPortal",{forceMount:void 0}),gt="TooltipContent",yt=i.forwardRef(((e,t)=>{const n=mt(gt,e.__scopeTooltip),{forceMount:s=n.forceMount,side:r="top",...i}=e,l=dt(gt,e.__scopeTooltip);return a.jsx(m,{present:s||l.open,children:l.disableHoverableContent?a.jsx(jt,{side:r,...i,ref:t}):a.jsx(vt,{side:r,...i,ref:t})})})),vt=i.forwardRef(((e,t)=>{const n=dt(gt,e.__scopeTooltip),s=at(gt,e.__scopeTooltip),r=i.useRef(null),l=f(t,r),[o,c]=i.useState(null),{trigger:d,onClose:u}=n,h=r.current,{onPointerInTransitChange:p}=s,m=i.useCallback((()=>{c(null),p(!1)}),[p]),g=i.useCallback(((e,t)=>{const n=e.currentTarget,s={x:e.clientX,y:e.clientY},r=function(e,t,n=5){const s=[];switch(t){case"top":s.push({x:e.x-n,y:e.y+n},{x:e.x+n,y:e.y+n});break;case"bottom":s.push({x:e.x-n,y:e.y-n},{x:e.x+n,y:e.y-n});break;case"left":s.push({x:e.x+n,y:e.y-n},{x:e.x+n,y:e.y+n});break;case"right":s.push({x:e.x-n,y:e.y-n},{x:e.x-n,y:e.y+n})}return s}(s,function(e,t){const n=Math.abs(t.top-e.y),s=Math.abs(t.bottom-e.y),r=Math.abs(t.right-e.x),i=Math.abs(t.left-e.x);switch(Math.min(n,s,r,i)){case i:return"left";case r:return"right";case n:return"top";case s:return"bottom";default:throw new Error("unreachable")}}(s,n.getBoundingClientRect())),i=function(e){const t=e.slice();return t.sort(((e,t)=>e.x<t.x?-1:e.x>t.x?1:e.y<t.y?-1:e.y>t.y?1:0)),function(e){if(e.length<=1)return e.slice();const t=[];for(let s=0;s<e.length;s++){const n=e[s];for(;t.length>=2;){const e=t[t.length-1],s=t[t.length-2];if(!((e.x-s.x)*(n.y-s.y)>=(e.y-s.y)*(n.x-s.x)))break;t.pop()}t.push(n)}t.pop();const n=[];for(let s=e.length-1;s>=0;s--){const t=e[s];for(;n.length>=2;){const e=n[n.length-1],s=n[n.length-2];if(!((e.x-s.x)*(t.y-s.y)>=(e.y-s.y)*(t.x-s.x)))break;n.pop()}n.push(t)}return n.pop(),1===t.length&&1===n.length&&t[0].x===n[0].x&&t[0].y===n[0].y?t:t.concat(n)}(t)}([...r,...function(e){const{top:t,right:n,bottom:s,left:r}=e;return[{x:r,y:t},{x:n,y:t},{x:n,y:s},{x:r,y:s}]}(t.getBoundingClientRect())]);c(i),p(!0)}),[p]);return i.useEffect((()=>()=>m()),[m]),i.useEffect((()=>{if(d&&h){const e=e=>g(e,h),t=e=>g(e,d);return d.addEventListener("pointerleave",e),h.addEventListener("pointerleave",t),()=>{d.removeEventListener("pointerleave",e),h.removeEventListener("pointerleave",t)}}}),[d,h,g,m]),i.useEffect((()=>{if(o){const e=e=>{const t=e.target,n={x:e.clientX,y:e.clientY},s=(null==d?void 0:d.contains(t))||(null==h?void 0:h.contains(t)),r=!function(e,t){const{x:n,y:s}=e;let r=!1;for(let i=0,a=t.length-1;i<t.length;a=i++){const e=t[i],l=t[a],o=e.x,c=e.y,d=l.x,u=l.y;c>s!=u>s&&n<(d-o)*(s-c)/(u-c)+o&&(r=!r)}return r}(n,o);s?m():r&&(m(),u())};return document.addEventListener("pointermove",e),()=>document.removeEventListener("pointermove",e)}}),[d,h,o,u,m]),a.jsx(jt,{...e,ref:l})})),[bt,xt]=Ze(ot,{isInside:!1}),wt=y("TooltipContent"),jt=i.forwardRef(((e,t)=>{const{__scopeTooltip:n,children:s,"aria-label":r,onEscapeKeyDown:l,onPointerDownOutside:o,...c}=e,d=dt(gt,n),u=tt(n),{onClose:f}=d;return i.useEffect((()=>(document.addEventListener(rt,f),()=>document.removeEventListener(rt,f))),[f]),i.useEffect((()=>{if(d.trigger){const e=e=>{const t=e.target;(null==t?void 0:t.contains(d.trigger))&&f()};return window.addEventListener("scroll",e,{capture:!0}),()=>window.removeEventListener("scroll",e,{capture:!0})}}),[d.trigger,f]),a.jsx(g,{asChild:!0,disableOutsidePointerEvents:!1,onEscapeKeyDown:l,onPointerDownOutside:o,onFocusOutside:e=>e.preventDefault(),onDismiss:f,children:a.jsxs(H,{"data-state":d.stateAttribute,...u,...c,ref:t,style:{...c.style,"--radix-tooltip-content-transform-origin":"var(--radix-popper-transform-origin)","--radix-tooltip-content-available-width":"var(--radix-popper-available-width)","--radix-tooltip-content-available-height":"var(--radix-popper-available-height)","--radix-tooltip-trigger-width":"var(--radix-popper-anchor-width)","--radix-tooltip-trigger-height":"var(--radix-popper-anchor-height)"},children:[a.jsx(wt,{children:s}),a.jsx(bt,{scope:n,isInside:!0,children:a.jsx(v,{id:d.contentId,role:"tooltip",children:r||s})})]})})}));yt.displayName=gt;var kt="TooltipArrow";i.forwardRef(((e,t)=>{const{__scopeTooltip:n,...s}=e,r=tt(n);return xt(kt,n).isInside?null:a.jsx(J,{...r,...s,ref:t})})).displayName=kt;var Et=yt;const Nt=lt,Tt=ut,_t=ht,Ct=i.forwardRef((({className:e,sideOffset:t=4,...n},s)=>a.jsx(Et,{ref:s,sideOffset:t,className:b("z-50 overflow-hidden rounded-md border bg-popover px-3 py-1.5 text-sm text-popover-foreground shadow-md animate-in fade-in-0 zoom-in-95 data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=closed]:zoom-out-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2",e),...n})));Ct.displayName=Et.displayName;const Pt=()=>{const{activeView:e,setActiveView:t}=Te(),n=[{id:"explorer",icon:ve,label:"Explorer"},{id:"search",icon:T,label:"Search"},{id:"git",icon:xe,label:"Source Control"},{id:"extensions",icon:je,label:"Extensions"}];return a.jsxs("div",{className:"activity-bar flex flex-col items-center py-2",children:[a.jsx("div",{className:"flex flex-col items-center space-y-4",children:n.map((n=>a.jsx(St,{icon:n.icon,label:n.label,isActive:e===n.id,onClick:()=>t(n.id)},n.id)))}),a.jsx("div",{className:"flex-1"}),a.jsx(St,{icon:P,label:"Settings",isActive:!1,onClick:()=>{}})]})},St=({icon:e,label:t,isActive:n,onClick:s})=>a.jsx(Nt,{children:a.jsxs(Tt,{delayDuration:300,children:[a.jsx(_t,{asChild:!0,children:a.jsxs("button",{className:"p-2 rounded transition-colors relative "+(n?"text-primary bg-sidebar-accent":"text-sidebar-foreground hover:text-primary hover:bg-sidebar-accent"),onClick:s,"aria-label":t,children:[n&&a.jsx("div",{className:"absolute left-0 top-0 bottom-0 w-0.5 bg-primary"}),a.jsx(e,{size:24})]})}),a.jsx(Ct,{side:"right",className:"bg-popover text-popover-foreground",children:t})]})});var $t={exports:{}};(e=>{var t,n=Object.defineProperty,s=Object.getOwnPropertyDescriptor,r=Object.getOwnPropertyNames,i=Object.prototype.hasOwnProperty,a=(e,t,n)=>new Promise(((s,r)=>{var i=e=>{try{l(n.next(e))}catch(t){r(t)}},a=e=>{try{l(n.throw(e))}catch(t){r(t)}},l=e=>e.done?s(e.value):Promise.resolve(e.value).then(i,a);l((n=n.apply(e,t)).next())})),l={};function o(e){let t=e=>{if(null===e)n.write8(0);else if("boolean"==typeof e)n.write8(1),n.write8(+e);else if("number"==typeof e)n.write8(2),n.write32(0|e);else if("string"==typeof e)n.write8(3),n.write(c(e));else if(e instanceof Uint8Array)n.write8(4),n.write(e);else if(e instanceof Array){n.write8(5),n.write32(e.length);for(let n of e)t(n)}else{let s=Object.keys(e);n.write8(6),n.write32(s.length);for(let r of s)n.write(c(r)),t(e[r])}},n=new f;return n.write32(0),n.write32(e.id<<1|+!e.isRequest),t(e.value),p(n.buf,n.len-4,0),n.buf.subarray(0,n.len)}((e,t)=>{for(var s in t)n(e,s,{get:t[s],enumerable:!0})})(l,{analyzeMetafile:()=>ae,analyzeMetafileSync:()=>de,build:()=>ne,buildSync:()=>le,context:()=>se,default:()=>pe,formatMessages:()=>ie,formatMessagesSync:()=>ce,initialize:()=>fe,transform:()=>re,transformSync:()=>oe,version:()=>te}),e.exports=(t=l,((e,t,a,l)=>{if(t&&"object"==typeof t||"function"==typeof t)for(let o of r(t))i.call(e,o)||o===a||n(e,o,{get:()=>t[o],enumerable:!(l=s(t,o))||l.enumerable});return e})(n({},"__esModule",{value:!0}),t));var c,d,u,f=class{constructor(e=new Uint8Array(1024)){this.buf=e,this.len=0,this.ptr=0}_write(e){if(this.len+e>this.buf.length){let t=new Uint8Array(2*(this.len+e));t.set(this.buf),this.buf=t}return this.len+=e,this.len-e}write8(e){let t=this._write(1);this.buf[t]=e}write32(e){let t=this._write(4);p(this.buf,e,t)}write(e){let t=this._write(4+e.length);p(this.buf,e.length,t),this.buf.set(e,t+4)}_read(e){if(this.ptr+e>this.buf.length)throw new Error("Invalid packet");return this.ptr+=e,this.ptr-e}read8(){return this.buf[this._read(1)]}read32(){return h(this.buf,this._read(4))}read(){let e=this.read32(),t=new Uint8Array(e),n=this._read(t.length);return t.set(this.buf.subarray(n,n+e)),t}};if("undefined"!=typeof TextEncoder&&"undefined"!=typeof TextDecoder){let e=new TextEncoder,t=new TextDecoder;c=t=>e.encode(t),d=e=>t.decode(e),u='new TextEncoder().encode("")'}else{if("undefined"==typeof Buffer)throw new Error("No UTF-8 codec found");c=e=>Buffer.from(e),d=e=>{let{buffer:t,byteOffset:n,byteLength:s}=e;return Buffer.from(t,n,s).toString()},u='Buffer.from("")'}if(!(c("")instanceof Uint8Array))throw new Error(`Invariant violation: "${u} instanceof Uint8Array" is incorrectly false\n\nThis indicates that your JavaScript environment is broken. You cannot use\nesbuild in this environment because esbuild relies on this invariant. This\nis not a problem with esbuild. You need to fix your environment instead.\n`);function h(e,t){return e[t++]|e[t++]<<8|e[t++]<<16|e[t++]<<24}function p(e,t,n){e[n++]=t,e[n++]=t>>8,e[n++]=t>>16,e[n++]=t>>24}var m=JSON.stringify,g="warning",y="silent";function v(e){if(B(e,"target"),e.indexOf(",")>=0)throw new Error(`Invalid target: ${e}`);return e}var b=()=>null,x=e=>"boolean"==typeof e?null:"a boolean",w=e=>"string"==typeof e?null:"a string",j=e=>e instanceof RegExp?null:"a RegExp object",k=e=>"number"==typeof e&&e===(0|e)?null:"an integer",E=e=>"function"==typeof e?null:"a function",N=e=>Array.isArray(e)?null:"an array",T=e=>"object"!=typeof e||null===e||Array.isArray(e)?"an object":null,_=e=>"object"==typeof e&&null!==e?null:"an array or an object",C=e=>e instanceof WebAssembly.Module?null:"a WebAssembly.Module",P=e=>"object"!=typeof e||Array.isArray(e)?"an object or null":null,S=e=>"string"==typeof e||"boolean"==typeof e?null:"a string or a boolean",$=e=>"string"==typeof e||"object"==typeof e&&null!==e&&!Array.isArray(e)?null:"a string or an object",I=e=>"string"==typeof e||Array.isArray(e)?null:"a string or an array",D=e=>"string"==typeof e||e instanceof Uint8Array?null:"a string or a Uint8Array",A=e=>"string"==typeof e||e instanceof URL?null:"a string or a URL";function R(e,t,n,s){let r=e[n];if(t[n+""]=!0,void 0===r)return;let i=s(r);if(null!==i)throw new Error(`${m(n)} must be ${i}`);return r}function O(e,t,n){for(let s in e)if(!(s in t))throw new Error(`Invalid option ${n}: ${m(s)}`)}function F(e){let t;if(void 0!==e){t=Object.create(null);for(let n in e){let s=e[n];if("string"!=typeof s&&!1!==s)throw new Error(`Expected ${m(n)} in mangle cache to map to either a string or false`);t[n]=s}}return t}function V(e,t,n,s,r){let i=R(t,n,"color",x),a=R(t,n,"logLevel",w),l=R(t,n,"logLimit",k);void 0!==i?e.push(`--color=${i}`):s&&e.push("--color=true"),e.push(`--log-level=${a||r}`),e.push(`--log-limit=${l||0}`)}function B(e,t,n){if("string"!=typeof e)throw new Error(`Expected value for ${t}${void 0!==n?" "+m(n):""} to be a string, got ${typeof e} instead`);return e}function M(e,t,n){let s=R(t,n,"legalComments",w),r=R(t,n,"sourceRoot",w),i=R(t,n,"sourcesContent",x),a=R(t,n,"target",I),l=R(t,n,"format",w),o=R(t,n,"globalName",w),c=R(t,n,"mangleProps",j),d=R(t,n,"reserveProps",j),u=R(t,n,"mangleQuoted",x),f=R(t,n,"minify",x),h=R(t,n,"minifySyntax",x),p=R(t,n,"minifyWhitespace",x),g=R(t,n,"minifyIdentifiers",x),y=R(t,n,"lineLimit",k),b=R(t,n,"drop",N),E=R(t,n,"charset",w),_=R(t,n,"treeShaking",x),C=R(t,n,"ignoreAnnotations",x),P=R(t,n,"jsx",w),S=R(t,n,"jsxFactory",w),D=R(t,n,"jsxFragment",w),A=R(t,n,"jsxImportSource",w),O=R(t,n,"jsxDev",x),F=R(t,n,"jsxSideEffects",x),V=R(t,n,"define",T),M=R(t,n,"logOverride",T),U=R(t,n,"supported",T),L=R(t,n,"pure",N),W=R(t,n,"keepNames",x),z=R(t,n,"platform",w),G=R(t,n,"tsconfigRaw",$);if(s&&e.push(`--legal-comments=${s}`),void 0!==r&&e.push(`--source-root=${r}`),void 0!==i&&e.push(`--sources-content=${i}`),a&&(Array.isArray(a)?e.push(`--target=${Array.from(a).map(v).join(",")}`):e.push(`--target=${v(a)}`)),l&&e.push(`--format=${l}`),o&&e.push(`--global-name=${o}`),z&&e.push(`--platform=${z}`),G&&e.push(`--tsconfig-raw=${"string"==typeof G?G:JSON.stringify(G)}`),f&&e.push("--minify"),h&&e.push("--minify-syntax"),p&&e.push("--minify-whitespace"),g&&e.push("--minify-identifiers"),y&&e.push(`--line-limit=${y}`),E&&e.push(`--charset=${E}`),void 0!==_&&e.push(`--tree-shaking=${_}`),C&&e.push("--ignore-annotations"),b)for(let m of b)e.push(`--drop:${B(m,"drop")}`);if(c&&e.push(`--mangle-props=${c.source}`),d&&e.push(`--reserve-props=${d.source}`),void 0!==u&&e.push(`--mangle-quoted=${u}`),P&&e.push(`--jsx=${P}`),S&&e.push(`--jsx-factory=${S}`),D&&e.push(`--jsx-fragment=${D}`),A&&e.push(`--jsx-import-source=${A}`),O&&e.push("--jsx-dev"),F&&e.push("--jsx-side-effects"),V)for(let m in V){if(m.indexOf("=")>=0)throw new Error(`Invalid define: ${m}`);e.push(`--define:${m}=${B(V[m],"define",m)}`)}if(M)for(let m in M){if(m.indexOf("=")>=0)throw new Error(`Invalid log override: ${m}`);e.push(`--log-override:${m}=${B(M[m],"log override",m)}`)}if(U)for(let v in U){if(v.indexOf("=")>=0)throw new Error(`Invalid supported: ${v}`);const t=U[v];if("boolean"!=typeof t)throw new Error(`Expected value for supported ${m(v)} to be a boolean, got ${typeof t} instead`);e.push(`--supported:${v}=${t}`)}if(L)for(let m of L)e.push(`--pure:${B(m,"pure")}`);W&&e.push("--keep-names")}function U(e){const t={},n={didClose:!1,reason:""};let s={},r=0,i=0,l=new Uint8Array(16384),u=0,p=(t,i,a)=>{if(n.didClose)return a("The service is no longer running"+n.reason,null);let l=r++;s[l]=(e,n)=>{try{a(e,n)}finally{t&&t.unref()}},t&&t.ref(),e.writeToStdin(o({id:l,isRequest:!0,value:i}))},v=(t,s)=>{if(n.didClose)throw new Error("The service is no longer running"+n.reason);e.writeToStdin(o({id:t,isRequest:!1,value:s}))},b=(n,s)=>a(this,null,(function*(){try{if("ping"===s.command)return void v(n,{});if("number"==typeof s.key){const e=t[s.key];if(e){const t=e[s.command];if(t)return void(yield t(n,s))}}throw new Error("Invalid command: "+s.command)}catch(r){v(n,{errors:[G(r,e,null,void 0,"")]})}})),j=!0,C=e=>{if(j){j=!1;let t=String.fromCharCode(...e);if("0.18.7"!==t)throw new Error(`Cannot start service: Host version "0.18.7" does not match binary version ${m(t)}`);return}let t=function(e){let t=()=>{switch(n.read8()){case 0:return null;case 1:return!!n.read8();case 2:return n.read32();case 3:return d(n.read());case 4:return n.read();case 5:{let e=n.read32(),s=[];for(let n=0;n<e;n++)s.push(t());return s}case 6:{let e=n.read32(),s={};for(let r=0;r<e;r++)s[d(n.read())]=t();return s}default:throw new Error("Invalid packet")}},n=new f(e),s=n.read32(),r=!(1&s);s>>>=1;let i=t();if(n.ptr!==e.length)throw new Error("Invalid packet");return{id:s,isRequest:r,value:i}}(e);if(t.isRequest)b(t.id,t.value);else{let e=s[t.id];delete s[t.id],t.value.error?e(t.value.error,{}):e(null,t.value)}};return{readFromStdout:e=>{let t=u+e.length;if(t>l.length){let e=new Uint8Array(2*t);e.set(l),l=e}l.set(e,u),u+=e.length;let n=0;for(;n+4<=u;){let e=h(l,n);if(n+4+e>u)break;n+=4,C(l.subarray(n,n+e)),n+=e}n>0&&(l.copyWithin(0,n,u),u-=n)},afterClose:e=>{n.didClose=!0,e&&(n.reason=": "+(e.message||e));const t="The service was stopped"+n.reason;for(let n in s)s[n](t,null);s={}},service:{buildOrContext:({callName:n,refs:s,options:r,isTTY:a,defaultWD:l,callback:o})=>{let d=0;const u=i++,f={},h={ref(){1===++d&&s&&s.ref()},unref(){0===--d&&(delete t[u],s&&s.unref())}};t[u]=f,h.ref(),function(e,t,n,s,r,i,a,l,o,d,u){const f=W(),h="context"===e,p=(e,t)=>{const s=[];try{V(s,l,{},o,g)}catch(c){}const a=G(e,i,f,void 0,t);n(r,{command:"error",flags:s,error:a},(()=>{a.detail=f.load(a.detail),u(H(h?"Context failed":"Build failed",[a],[]),null)}))};let m;if("object"==typeof l){const e=l.plugins;if(void 0!==e){if(!Array.isArray(e))return p(new Error('"plugins" must be an array'),"");m=e}}if(m&&m.length>0)return i.isSync?p(new Error("Cannot use plugins in synchronous API calls"),""):void L(t,n,s,r,i,a,l,m,f).then((e=>{if(!e.ok)return p(e.error,e.pluginName);try{y(e.requestPlugins,e.runOnEndCallbacks,e.scheduleOnDisposeCallbacks)}catch(t){p(t,"")}}),(e=>p(e,"")));try{y(null,((e,t)=>t([],[])),(()=>{}))}catch(v){p(v,"")}function y(p,m,y){const v=i.hasFS,{entries:b,flags:j,write:C,stdinContents:P,stdinResolveDir:$,absWorkingDir:I,nodePaths:A,mangleCache:U}=function(e,t,n,s,r){var i;let a=[],l=[],o=Object.create(null),d=null,u=null;V(a,t,o,n,s),M(a,t,o);let f=R(t,o,"sourcemap",S),h=R(t,o,"bundle",x),p=R(t,o,"splitting",x),m=R(t,o,"preserveSymlinks",x),g=R(t,o,"metafile",x),y=R(t,o,"outfile",w),v=R(t,o,"outdir",w),b=R(t,o,"outbase",w),j=R(t,o,"tsconfig",w),k=R(t,o,"resolveExtensions",N),E=R(t,o,"nodePaths",N),C=R(t,o,"mainFields",N),P=R(t,o,"conditions",N),$=R(t,o,"external",N),I=R(t,o,"packages",w),A=R(t,o,"alias",T),U=R(t,o,"loader",T),L=R(t,o,"outExtension",T),W=R(t,o,"publicPath",w),z=R(t,o,"entryNames",w),G=R(t,o,"chunkNames",w),q=R(t,o,"assetNames",w),H=R(t,o,"inject",N),J=R(t,o,"banner",T),Y=R(t,o,"footer",T),K=R(t,o,"entryPoints",_),X=R(t,o,"absWorkingDir",w),Q=R(t,o,"stdin",T),Z=null!=(i=R(t,o,"write",x))?i:r,ee=R(t,o,"allowOverwrite",x),te=R(t,o,"mangleCache",T);if(o.plugins=!0,O(t,o,`in ${e}() call`),f&&a.push("--sourcemap"+(!0===f?"":`=${f}`)),h&&a.push("--bundle"),ee&&a.push("--allow-overwrite"),p&&a.push("--splitting"),m&&a.push("--preserve-symlinks"),g&&a.push("--metafile"),y&&a.push(`--outfile=${y}`),v&&a.push(`--outdir=${v}`),b&&a.push(`--outbase=${b}`),j&&a.push(`--tsconfig=${j}`),I&&a.push(`--packages=${I}`),k){let e=[];for(let t of k){if(B(t,"resolve extension"),t.indexOf(",")>=0)throw new Error(`Invalid resolve extension: ${t}`);e.push(t)}a.push(`--resolve-extensions=${e.join(",")}`)}if(W&&a.push(`--public-path=${W}`),z&&a.push(`--entry-names=${z}`),G&&a.push(`--chunk-names=${G}`),q&&a.push(`--asset-names=${q}`),C){let e=[];for(let t of C){if(B(t,"main field"),t.indexOf(",")>=0)throw new Error(`Invalid main field: ${t}`);e.push(t)}a.push(`--main-fields=${e.join(",")}`)}if(P){let e=[];for(let t of P){if(B(t,"condition"),t.indexOf(",")>=0)throw new Error(`Invalid condition: ${t}`);e.push(t)}a.push(`--conditions=${e.join(",")}`)}if($)for(let c of $)a.push(`--external:${B(c,"external")}`);if(A)for(let c in A){if(c.indexOf("=")>=0)throw new Error(`Invalid package name in alias: ${c}`);a.push(`--alias:${c}=${B(A[c],"alias",c)}`)}if(J)for(let c in J){if(c.indexOf("=")>=0)throw new Error(`Invalid banner file type: ${c}`);a.push(`--banner:${c}=${B(J[c],"banner",c)}`)}if(Y)for(let c in Y){if(c.indexOf("=")>=0)throw new Error(`Invalid footer file type: ${c}`);a.push(`--footer:${c}=${B(Y[c],"footer",c)}`)}if(H)for(let c of H)a.push(`--inject:${B(c,"inject")}`);if(U)for(let c in U){if(c.indexOf("=")>=0)throw new Error(`Invalid loader extension: ${c}`);a.push(`--loader:${c}=${B(U[c],"loader",c)}`)}if(L)for(let c in L){if(c.indexOf("=")>=0)throw new Error(`Invalid out extension: ${c}`);a.push(`--out-extension:${c}=${B(L[c],"out extension",c)}`)}if(K)if(Array.isArray(K))for(let c=0,x=K.length;c<x;c++){let e=K[c];if("object"==typeof e&&null!==e){let t=Object.create(null),n=R(e,t,"in",w),s=R(e,t,"out",w);if(O(e,t,"in entry point at index "+c),void 0===n)throw new Error('Missing property "in" for entry point at index '+c);if(void 0===s)throw new Error('Missing property "out" for entry point at index '+c);l.push([s,n])}else l.push(["",B(e,"entry point at index "+c)])}else for(let c in K)l.push([c,B(K[c],"entry point",c)]);if(Q){let e=Object.create(null),t=R(Q,e,"contents",D),n=R(Q,e,"resolveDir",w),s=R(Q,e,"sourcefile",w),r=R(Q,e,"loader",w);O(Q,e,'in "stdin" object'),s&&a.push(`--sourcefile=${s}`),r&&a.push(`--loader=${r}`),n&&(u=n),"string"==typeof t?d=c(t):t instanceof Uint8Array&&(d=t)}let ne=[];if(E)for(let c of E)c+="",ne.push(c);return{entries:l,flags:a,write:Z,stdinContents:d,stdinResolveDir:u,absWorkingDir:X,nodePaths:ne,mangleCache:F(te)}}(e,l,o,g,v);if(C&&!i.hasFS)throw new Error('The "write" option is unavailable in this environment');const L={command:"build",key:t,entries:b,flags:j,write:C,stdinContents:P,stdinResolveDir:$,absWorkingDir:I||d,nodePaths:A,context:h};p&&(L.plugins=p),U&&(L.mangleCache=U);const W=(e,t)=>{const n={errors:J(e.errors,f),warnings:J(e.warnings,f),outputFiles:void 0,metafile:void 0,mangleCache:void 0},s=n.errors.slice(),r=n.warnings.slice();e.outputFiles&&(n.outputFiles=e.outputFiles.map(Q)),e.metafile&&(n.metafile=JSON.parse(e.metafile)),e.mangleCache&&(n.mangleCache=e.mangleCache),e.writeToStdout,m(n,((e,i)=>{if(s.length>0||e.length>0){const n=H("Build failed",s.concat(e),r.concat(i));return t(n,null,e,i)}t(null,n,e,i)}))};let z,G;h&&(a["on-end"]=(e,t)=>new Promise((n=>{W(t,((t,r,i,a)=>{const l={errors:i,warnings:a};G&&G(t,r),z=void 0,G=void 0,s(e,l),n()}))}))),n(r,L,((e,l)=>{if(e)return u(new Error(e),null);if(!h)return W(l,((e,t)=>(y(),u(e,t))));if(l.errors.length>0)return u(H("Context failed",l.errors,l.warnings),null);let o=!1;const c={rebuild:()=>(z||(z=new Promise(((e,s)=>{let i;G=(t,n)=>{i||(i=()=>t?s(t):e(n))};const a=()=>{n(r,{command:"rebuild",key:t},((e,t)=>{e?s(new Error(e)):i?i():a()}))};a()}))),z),watch:(e={})=>new Promise(((s,a)=>{if(!i.hasFS)throw new Error('Cannot use the "watch" API in this environment');O(e,{},"in watch() call"),n(r,{command:"watch",key:t},(e=>{e?a(new Error(e)):s(void 0)}))})),serve:(e={})=>new Promise(((l,o)=>{if(!i.hasFS)throw new Error('Cannot use the "serve" API in this environment');const c={},d=R(e,c,"port",k),u=R(e,c,"host",w),f=R(e,c,"servedir",w),h=R(e,c,"keyfile",w),p=R(e,c,"certfile",w),m=R(e,c,"onRequest",E);O(e,c,"in serve() call");const g={command:"serve",key:t,onRequest:!!m};void 0!==d&&(g.port=d),void 0!==u&&(g.host=u),void 0!==f&&(g.servedir=f),void 0!==h&&(g.keyfile=h),void 0!==p&&(g.certfile=p),n(r,g,((e,t)=>{if(e)return o(new Error(e));m&&(a["serve-request"]=(e,t)=>{m(t.args),s(e,{})}),l(t)}))})),cancel:()=>new Promise((e=>{if(o)return e();n(r,{command:"cancel",key:t},(()=>{e()}))})),dispose:()=>new Promise((e=>{if(o)return e();o=!0,n(r,{command:"dispose",key:t},(()=>{e(),y(),r.unref()}))}))};r.ref(),u(null,c)}))}}(n,u,p,v,h,e,f,r,a,l,((e,t)=>{try{o(e,t)}finally{h.unref()}}))},transform:({callName:t,refs:n,input:s,options:r,isTTY:i,fs:a,callback:l})=>{const o=W();let d=d=>{try{if("string"!=typeof s&&!(s instanceof Uint8Array))throw new Error('The input to "transform" must be a string or a Uint8Array');let{flags:e,mangleCache:u}=function(e,t,n,s){let r=[],i=Object.create(null);V(r,t,i,n,s),M(r,t,i);let a=R(t,i,"sourcemap",S),l=R(t,i,"sourcefile",w),o=R(t,i,"loader",w),c=R(t,i,"banner",w),d=R(t,i,"footer",w),u=R(t,i,"mangleCache",T);return O(t,i,`in ${e}() call`),a&&r.push(`--sourcemap=${!0===a?"external":a}`),l&&r.push(`--sourcefile=${l}`),o&&r.push(`--loader=${o}`),c&&r.push(`--banner=${c}`),d&&r.push(`--footer=${d}`),{flags:r,mangleCache:F(u)}}(t,r,i,y),f={command:"transform",flags:e,inputFS:null!==d,input:null!==d?c(d):"string"==typeof s?c(s):s};u&&(f.mangleCache=u),p(n,f,((e,t)=>{if(e)return l(new Error(e),null);let n=J(t.errors,o),s=J(t.warnings,o),r=1,i=()=>{if(0===--r){let e={warnings:s,code:t.code,map:t.map,mangleCache:void 0,legalComments:void 0};"legalComments"in t&&(e.legalComments=null==t?void 0:t.legalComments),t.mangleCache&&(e.mangleCache=null==t?void 0:t.mangleCache),l(null,e)}};if(n.length>0)return l(H("Transform failed",n,s),null);t.codeFS&&(r++,a.readFile(t.code,((e,n)=>{null!==e?l(e,null):(t.code=n,i())}))),t.mapFS&&(r++,a.readFile(t.map,((e,n)=>{null!==e?l(e,null):(t.map=n,i())}))),i()}))}catch(u){let t=[];try{V(t,r,{},i,y)}catch(f){}const s=G(u,e,o,void 0,"");p(n,{command:"error",flags:t,error:s},(()=>{s.detail=o.load(s.detail),l(H("Transform failed",[s],[]),null)}))}};if(("string"==typeof s||s instanceof Uint8Array)&&s.length>1048576){let e=d;d=()=>a.writeFile(s,e)}d(null)},formatMessages:({callName:e,refs:t,messages:n,options:s,callback:r})=>{let i=K(n,"messages",null,"");if(!s)throw new Error(`Missing second argument in ${e}() call`);let a={},l=R(s,a,"kind",w),o=R(s,a,"color",x),c=R(s,a,"terminalWidth",k);if(O(s,a,`in ${e}() call`),void 0===l)throw new Error(`Missing "kind" in ${e}() call`);if("error"!==l&&"warning"!==l)throw new Error(`Expected "kind" to be "error" or "warning" in ${e}() call`);let d={command:"format-msgs",messages:i,isWarning:"warning"===l};void 0!==o&&(d.color=o),void 0!==c&&(d.terminalWidth=c),p(t,d,((e,t)=>{if(e)return r(new Error(e),null);r(null,t.messages)}))},analyzeMetafile:({callName:e,refs:t,metafile:n,options:s,callback:r})=>{void 0===s&&(s={});let i={},a=R(s,i,"color",x),l=R(s,i,"verbose",x);O(s,i,`in ${e}() call`);let o={command:"analyze-metafile",metafile:n};void 0!==a&&(o.color=a),void 0!==l&&(o.verbose=l),p(t,o,((e,t)=>{if(e)return r(new Error(e),null);r(null,t.result)}))}}}}var L=(e,t,n,s,r,i,l,o,d)=>a(void 0,null,(function*(){let u=[],f=[],h={},p={},g=[],y=0,v=0,k=[],T=!1;o=[...o];for(let n of o){let i={};if("object"!=typeof n)throw new Error(`Plugin at index ${v} must be an object`);const a=R(n,i,"name",w);if("string"!=typeof a||""===a)throw new Error(`Plugin at index ${v} is missing a name`);try{let o=R(n,i,"setup",E);if("function"!=typeof o)throw new Error("Plugin is missing a setup function");O(n,i,`on plugin ${m(a)}`);let c={name:a,onStart:!1,onEnd:!1,onResolve:[],onLoad:[]};v++;let x=o({initialOptions:l,resolve:(n,r={})=>{if(!T)throw new Error('Cannot call "resolve" before plugin setup has completed');if("string"!=typeof n)throw new Error("The path to resolve must be a string");let i=Object.create(null),l=R(r,i,"pluginName",w),o=R(r,i,"importer",w),c=R(r,i,"namespace",w),u=R(r,i,"resolveDir",w),f=R(r,i,"kind",w),h=R(r,i,"pluginData",b);return O(r,i,"in resolve() call"),new Promise(((r,i)=>{const p={command:"resolve",path:n,key:e,pluginName:a};if(null!=l&&(p.pluginName=l),null!=o&&(p.importer=o),null!=c&&(p.namespace=c),null!=u&&(p.resolveDir=u),null==f)throw new Error('Must specify "kind" when calling "resolve"');p.kind=f,null!=h&&(p.pluginData=d.store(h)),t(s,p,((e,t)=>{null!==e?i(new Error(e)):r({errors:J(t.errors,d),warnings:J(t.warnings,d),path:t.path,external:t.external,sideEffects:t.sideEffects,namespace:t.namespace,suffix:t.suffix,pluginData:d.load(t.pluginData)})}))}))},onStart(e){let t=z(new Error('This error came from the "onStart" callback registered here:'),r,"onStart");u.push({name:a,callback:e,note:t}),c.onStart=!0},onEnd(e){let t=z(new Error('This error came from the "onEnd" callback registered here:'),r,"onEnd");f.push({name:a,callback:e,note:t}),c.onEnd=!0},onResolve(e,t){let n=z(new Error('This error came from the "onResolve" callback registered here:'),r,"onResolve"),s={},i=R(e,s,"filter",j),l=R(e,s,"namespace",w);if(O(e,s,`in onResolve() call for plugin ${m(a)}`),null==i)throw new Error("onResolve() call is missing a filter");let o=y++;h[o]={name:a,callback:t,note:n},c.onResolve.push({id:o,filter:i.source,namespace:l||""})},onLoad(e,t){let n=z(new Error('This error came from the "onLoad" callback registered here:'),r,"onLoad"),s={},i=R(e,s,"filter",j),l=R(e,s,"namespace",w);if(O(e,s,`in onLoad() call for plugin ${m(a)}`),null==i)throw new Error("onLoad() call is missing a filter");let o=y++;p[o]={name:a,callback:t,note:n},c.onLoad.push({id:o,filter:i.source,namespace:l||""})},onDispose(e){g.push(e)},esbuild:r.esbuild});x&&(yield x),k.push(c)}catch(C){return{ok:!1,error:C,pluginName:a}}}i["on-start"]=(e,t)=>a(void 0,null,(function*(){let t={errors:[],warnings:[]};yield Promise.all(u.map((e=>a(void 0,[e],(function*({name:e,callback:n,note:s}){try{let s=yield n();if(null!=s){if("object"!=typeof s)throw new Error(`Expected onStart() callback in plugin ${m(e)} to return an object`);let n={},r=R(s,n,"errors",N),i=R(s,n,"warnings",N);O(s,n,`from onStart() callback in plugin ${m(e)}`),null!=r&&t.errors.push(...K(r,"errors",d,e)),null!=i&&t.warnings.push(...K(i,"warnings",d,e))}}catch(C){t.errors.push(G(C,r,d,s&&s(),e))}}))))),n(e,t)})),i["on-resolve"]=(e,t)=>a(void 0,null,(function*(){let s,i,a={},l="";for(let e of t.ids)try{({name:l,callback:s,note:i}=h[e]);let n=yield s({path:t.path,importer:t.importer,namespace:t.namespace,resolveDir:t.resolveDir,kind:t.kind,pluginData:d.load(t.pluginData)});if(null!=n){if("object"!=typeof n)throw new Error(`Expected onResolve() callback in plugin ${m(l)} to return an object`);let t={},s=R(n,t,"pluginName",w),r=R(n,t,"path",w),i=R(n,t,"namespace",w),o=R(n,t,"suffix",w),c=R(n,t,"external",x),u=R(n,t,"sideEffects",x),f=R(n,t,"pluginData",b),h=R(n,t,"errors",N),p=R(n,t,"warnings",N),g=R(n,t,"watchFiles",N),y=R(n,t,"watchDirs",N);O(n,t,`from onResolve() callback in plugin ${m(l)}`),a.id=e,null!=s&&(a.pluginName=s),null!=r&&(a.path=r),null!=i&&(a.namespace=i),null!=o&&(a.suffix=o),null!=c&&(a.external=c),null!=u&&(a.sideEffects=u),null!=f&&(a.pluginData=d.store(f)),null!=h&&(a.errors=K(h,"errors",d,l)),null!=p&&(a.warnings=K(p,"warnings",d,l)),null!=g&&(a.watchFiles=X(g,"watchFiles")),null!=y&&(a.watchDirs=X(y,"watchDirs"));break}}catch(C){a={id:e,errors:[G(C,r,d,i&&i(),l)]};break}n(e,a)})),i["on-load"]=(e,t)=>a(void 0,null,(function*(){let s,i,a={},l="";for(let e of t.ids)try{({name:l,callback:s,note:i}=p[e]);let n=yield s({path:t.path,namespace:t.namespace,suffix:t.suffix,pluginData:d.load(t.pluginData)});if(null!=n){if("object"!=typeof n)throw new Error(`Expected onLoad() callback in plugin ${m(l)} to return an object`);let t={},s=R(n,t,"pluginName",w),r=R(n,t,"contents",D),i=R(n,t,"resolveDir",w),o=R(n,t,"pluginData",b),u=R(n,t,"loader",w),f=R(n,t,"errors",N),h=R(n,t,"warnings",N),p=R(n,t,"watchFiles",N),g=R(n,t,"watchDirs",N);O(n,t,`from onLoad() callback in plugin ${m(l)}`),a.id=e,null!=s&&(a.pluginName=s),r instanceof Uint8Array?a.contents=r:null!=r&&(a.contents=c(r)),null!=i&&(a.resolveDir=i),null!=o&&(a.pluginData=d.store(o)),null!=u&&(a.loader=u),null!=f&&(a.errors=K(f,"errors",d,l)),null!=h&&(a.warnings=K(h,"warnings",d,l)),null!=p&&(a.watchFiles=X(p,"watchFiles")),null!=g&&(a.watchDirs=X(g,"watchDirs"));break}}catch(C){a={id:e,errors:[G(C,r,d,i&&i(),l)]};break}n(e,a)}));let _=(e,t)=>t([],[]);return f.length>0&&(_=(e,t)=>{a(void 0,null,(function*(){const n=[],s=[];for(const{name:t,callback:i,note:a}of f){let l,o;try{const n=yield i(e);if(null!=n){if("object"!=typeof n)throw new Error(`Expected onEnd() callback in plugin ${m(t)} to return an object`);let e={},s=R(n,e,"errors",N),r=R(n,e,"warnings",N);O(n,e,`from onEnd() callback in plugin ${m(t)}`),null!=s&&(l=K(s,"errors",d,t)),null!=r&&(o=K(r,"warnings",d,t))}}catch(C){l=[G(C,r,d,a&&a(),t)]}if(l){n.push(...l);try{e.errors.push(...l)}catch(C){}}if(o){s.push(...o);try{e.warnings.push(...o)}catch(C){}}}t(n,s)}))}),T=!0,{ok:!0,requestPlugins:k,runOnEndCallbacks:_,scheduleOnDisposeCallbacks:()=>{for(const e of g)setTimeout((()=>e()),0)}}}));function W(){const e=new Map;let t=0;return{load:t=>e.get(t),store(n){if(void 0===n)return-1;const s=t++;return e.set(s,n),s}}}function z(e,t,n){let s,r=!1;return()=>{if(r)return s;r=!0;try{let r=(e.stack+"").split("\n");r.splice(1,1);let i=q(t,r,n);if(i)return s={text:e.message,location:i},s}catch(i){}}}function G(e,t,n,s,r){let i="Internal error",a=null;try{i=(e&&e.message||e)+""}catch(l){}try{a=q(t,(e.stack+"").split("\n"),"")}catch(l){}return{id:"",pluginName:r,text:i,location:a,notes:s?[s]:[],detail:n?n.store(e):-1}}function q(e,t,n){let s="    at ";if(e.readFileSync&&!t[0].startsWith(s)&&t[1].startsWith(s))for(let i=1;i<t.length;i++){let a=t[i];if(a.startsWith(s))for(a=a.slice(7);;){let s=/^(?:new |async )?\S+ \((.*)\)$/.exec(a);if(s)a=s[1];else{if(s=/^eval at \S+ \((.*)\)(?:, \S+:\d+:\d+)?$/.exec(a),!s){if(s=/^(\S+):(\d+):(\d+)$/.exec(a),s){let i;try{i=e.readFileSync(s[1],"utf8")}catch(r){break}let a=i.split(/\r\n|\r|\n|\u2028|\u2029/)[+s[2]-1]||"",l=+s[3]-1,o=a.slice(l,l+n.length)===n?n.length:0;return{file:s[1],namespace:"file",line:+s[2],column:c(a.slice(0,l)).length,length:c(a.slice(l,l+o)).length,lineText:a+"\n"+t.slice(1).join("\n"),suggestion:""}}break}a=s[1]}}}return null}function H(e,t,n){let s=t.length<1?"":` with ${t.length} error${t.length<2?"":"s"}:`+t.slice(0,6).map(((e,t)=>{if(5===t)return"\n...";if(!e.location)return`\nerror: ${e.text}`;let{file:n,line:s,column:r}=e.location;return`\n${n}:${s}:${r}: ERROR: ${e.pluginName?`[plugin: ${e.pluginName}] `:""}${e.text}`})).join(""),r=new Error(`${e}${s}`);return r.errors=t,r.warnings=n,r}function J(e,t){for(const n of e)n.detail=t.load(n.detail);return e}function Y(e,t){if(null==e)return null;let n={},s=R(e,n,"file",w),r=R(e,n,"namespace",w),i=R(e,n,"line",k),a=R(e,n,"column",k),l=R(e,n,"length",k),o=R(e,n,"lineText",w),c=R(e,n,"suggestion",w);return O(e,n,t),{file:s||"",namespace:r||"",line:i||0,column:a||0,length:l||0,lineText:o||"",suggestion:c||""}}function K(e,t,n,s){let r=[],i=0;for(const a of e){let e={},l=R(a,e,"id",w),o=R(a,e,"pluginName",w),c=R(a,e,"text",w),d=R(a,e,"location",P),u=R(a,e,"notes",N),f=R(a,e,"detail",b),h=`in element ${i} of "${t}"`;O(a,e,h);let p=[];if(u)for(const t of u){let e={},n=R(t,e,"text",w),s=R(t,e,"location",P);O(t,e,h),p.push({text:n||"",location:Y(s,h)})}r.push({id:l||"",pluginName:o||s,text:c||"",location:Y(d,h),notes:p,detail:n?n.store(f):-1}),i++}return r}function X(e,t){const n=[];for(const s of e){if("string"!=typeof s)throw new Error(`${m(t)} must be an array of strings`);n.push(s)}return n}function Q({path:e,contents:t}){let n=null;return{path:e,contents:t,get text(){const e=this.contents;return null!==n&&e===t||(t=e,n=d(e)),n}}}var Z,ee,te="0.18.7",ne=e=>ue().build(e),se=e=>ue().context(e),re=(e,t)=>ue().transform(e,t),ie=(e,t)=>ue().formatMessages(e,t),ae=(e,t)=>ue().analyzeMetafile(e,t),le=()=>{throw new Error('The "buildSync" API only works in node')},oe=()=>{throw new Error('The "transformSync" API only works in node')},ce=()=>{throw new Error('The "formatMessagesSync" API only works in node')},de=()=>{throw new Error('The "analyzeMetafileSync" API only works in node')},ue=()=>{if(ee)return ee;if(Z)throw new Error('You need to wait for the promise returned from "initialize" to be resolved before calling this');throw new Error('You need to call "initialize" before calling this')},fe=e=>{e=function(e){let t=Object.create(null),n=R(e,t,"wasmURL",A),s=R(e,t,"wasmModule",C),r=R(e,t,"worker",x);return O(e,t,"in initialize() call"),{wasmURL:n,wasmModule:s,worker:r}}(e||{});let t=e.wasmURL,n=e.wasmModule,s=!1!==e.worker;if(!t&&!n)throw new Error('Must provide either the "wasmURL" option or the "wasmModule" option');if(Z)throw new Error('Cannot call "initialize" more than once');return(Z=he(t||"",n,s)).catch((()=>{Z=void 0})),Z},he=(e,t,n)=>a(void 0,null,(function*(){let s,r,i;if(n){let e=new Blob(['onmessage=((postMessage) => {\n      // Copyright 2018 The Go Authors. All rights reserved.\n      // Use of this source code is governed by a BSD-style\n      // license that can be found in the LICENSE file.\n      var __async = (__this, __arguments, generator) => {\n        return new Promise((resolve, reject) => {\n          var fulfilled = (value) => {\n            try {\n              step(generator.next(value));\n            } catch (e) {\n              reject(e);\n            }\n          };\n          var rejected = (value) => {\n            try {\n              step(generator.throw(value));\n            } catch (e) {\n              reject(e);\n            }\n          };\n          var step = (x) => x.done ? resolve(x.value) : Promise.resolve(x.value).then(fulfilled, rejected);\n          step((generator = generator.apply(__this, __arguments)).next());\n        });\n      };\n      let onmessage;\n      let globalThis = {};\n      for (let o = self; o; o = Object.getPrototypeOf(o))\n        for (let k of Object.getOwnPropertyNames(o))\n          if (!(k in globalThis))\n            Object.defineProperty(globalThis, k, { get: () => self[k] });\n      "use strict";\n      (() => {\n        const enosys = () => {\n          const err = new Error("not implemented");\n          err.code = "ENOSYS";\n          return err;\n        };\n        if (!globalThis.fs) {\n          let outputBuf = "";\n          globalThis.fs = {\n            constants: { O_WRONLY: -1, O_RDWR: -1, O_CREAT: -1, O_TRUNC: -1, O_APPEND: -1, O_EXCL: -1 },\n            // unused\n            writeSync(fd, buf) {\n              outputBuf += decoder.decode(buf);\n              const nl = outputBuf.lastIndexOf("\\n");\n              if (nl != -1) {\n                console.log(outputBuf.substring(0, nl));\n                outputBuf = outputBuf.substring(nl + 1);\n              }\n              return buf.length;\n            },\n            write(fd, buf, offset, length, position, callback) {\n              if (offset !== 0 || length !== buf.length || position !== null) {\n                callback(enosys());\n                return;\n              }\n              const n = this.writeSync(fd, buf);\n              callback(null, n);\n            },\n            chmod(path, mode, callback) {\n              callback(enosys());\n            },\n            chown(path, uid, gid, callback) {\n              callback(enosys());\n            },\n            close(fd, callback) {\n              callback(enosys());\n            },\n            fchmod(fd, mode, callback) {\n              callback(enosys());\n            },\n            fchown(fd, uid, gid, callback) {\n              callback(enosys());\n            },\n            fstat(fd, callback) {\n              callback(enosys());\n            },\n            fsync(fd, callback) {\n              callback(null);\n            },\n            ftruncate(fd, length, callback) {\n              callback(enosys());\n            },\n            lchown(path, uid, gid, callback) {\n              callback(enosys());\n            },\n            link(path, link, callback) {\n              callback(enosys());\n            },\n            lstat(path, callback) {\n              callback(enosys());\n            },\n            mkdir(path, perm, callback) {\n              callback(enosys());\n            },\n            open(path, flags, mode, callback) {\n              callback(enosys());\n            },\n            read(fd, buffer, offset, length, position, callback) {\n              callback(enosys());\n            },\n            readdir(path, callback) {\n              callback(enosys());\n            },\n            readlink(path, callback) {\n              callback(enosys());\n            },\n            rename(from, to, callback) {\n              callback(enosys());\n            },\n            rmdir(path, callback) {\n              callback(enosys());\n            },\n            stat(path, callback) {\n              callback(enosys());\n            },\n            symlink(path, link, callback) {\n              callback(enosys());\n            },\n            truncate(path, length, callback) {\n              callback(enosys());\n            },\n            unlink(path, callback) {\n              callback(enosys());\n            },\n            utimes(path, atime, mtime, callback) {\n              callback(enosys());\n            }\n          };\n        }\n        if (!globalThis.process) {\n          globalThis.process = {\n            getuid() {\n              return -1;\n            },\n            getgid() {\n              return -1;\n            },\n            geteuid() {\n              return -1;\n            },\n            getegid() {\n              return -1;\n            },\n            getgroups() {\n              throw enosys();\n            },\n            pid: -1,\n            ppid: -1,\n            umask() {\n              throw enosys();\n            },\n            cwd() {\n              throw enosys();\n            },\n            chdir() {\n              throw enosys();\n            }\n          };\n        }\n        if (!globalThis.crypto) {\n          throw new Error("globalThis.crypto is not available, polyfill required (crypto.getRandomValues only)");\n        }\n        if (!globalThis.performance) {\n          throw new Error("globalThis.performance is not available, polyfill required (performance.now only)");\n        }\n        if (!globalThis.TextEncoder) {\n          throw new Error("globalThis.TextEncoder is not available, polyfill required");\n        }\n        if (!globalThis.TextDecoder) {\n          throw new Error("globalThis.TextDecoder is not available, polyfill required");\n        }\n        const encoder = new TextEncoder("utf-8");\n        const decoder = new TextDecoder("utf-8");\n        globalThis.Go = class {\n          constructor() {\n            this.argv = ["js"];\n            this.env = {};\n            this.exit = (code) => {\n              if (code !== 0) {\n                console.warn("exit code:", code);\n              }\n            };\n            this._exitPromise = new Promise((resolve) => {\n              this._resolveExitPromise = resolve;\n            });\n            this._pendingEvent = null;\n            this._scheduledTimeouts = /* @__PURE__ */ new Map();\n            this._nextCallbackTimeoutID = 1;\n            const setInt64 = (addr, v) => {\n              this.mem.setUint32(addr + 0, v, true);\n              this.mem.setUint32(addr + 4, Math.floor(v / 4294967296), true);\n            };\n            const getInt64 = (addr) => {\n              const low = this.mem.getUint32(addr + 0, true);\n              const high = this.mem.getInt32(addr + 4, true);\n              return low + high * 4294967296;\n            };\n            const loadValue = (addr) => {\n              const f = this.mem.getFloat64(addr, true);\n              if (f === 0) {\n                return void 0;\n              }\n              if (!isNaN(f)) {\n                return f;\n              }\n              const id = this.mem.getUint32(addr, true);\n              return this._values[id];\n            };\n            const storeValue = (addr, v) => {\n              const nanHead = 2146959360;\n              if (typeof v === "number" && v !== 0) {\n                if (isNaN(v)) {\n                  this.mem.setUint32(addr + 4, nanHead, true);\n                  this.mem.setUint32(addr, 0, true);\n                  return;\n                }\n                this.mem.setFloat64(addr, v, true);\n                return;\n              }\n              if (v === void 0) {\n                this.mem.setFloat64(addr, 0, true);\n                return;\n              }\n              let id = this._ids.get(v);\n              if (id === void 0) {\n                id = this._idPool.pop();\n                if (id === void 0) {\n                  id = this._values.length;\n                }\n                this._values[id] = v;\n                this._goRefCounts[id] = 0;\n                this._ids.set(v, id);\n              }\n              this._goRefCounts[id]++;\n              let typeFlag = 0;\n              switch (typeof v) {\n                case "object":\n                  if (v !== null) {\n                    typeFlag = 1;\n                  }\n                  break;\n                case "string":\n                  typeFlag = 2;\n                  break;\n                case "symbol":\n                  typeFlag = 3;\n                  break;\n                case "function":\n                  typeFlag = 4;\n                  break;\n              }\n              this.mem.setUint32(addr + 4, nanHead | typeFlag, true);\n              this.mem.setUint32(addr, id, true);\n            };\n            const loadSlice = (addr) => {\n              const array = getInt64(addr + 0);\n              const len = getInt64(addr + 8);\n              return new Uint8Array(this._inst.exports.mem.buffer, array, len);\n            };\n            const loadSliceOfValues = (addr) => {\n              const array = getInt64(addr + 0);\n              const len = getInt64(addr + 8);\n              const a = new Array(len);\n              for (let i = 0; i < len; i++) {\n                a[i] = loadValue(array + i * 8);\n              }\n              return a;\n            };\n            const loadString = (addr) => {\n              const saddr = getInt64(addr + 0);\n              const len = getInt64(addr + 8);\n              return decoder.decode(new DataView(this._inst.exports.mem.buffer, saddr, len));\n            };\n            const timeOrigin = Date.now() - performance.now();\n            this.importObject = {\n              go: {\n                // Go\'s SP does not change as long as no Go code is running. Some operations (e.g. calls, getters and setters)\n                // may synchronously trigger a Go event handler. This makes Go code get executed in the middle of the imported\n                // function. A goroutine can switch to a new stack if the current stack is too small (see morestack function).\n                // This changes the SP, thus we have to update the SP used by the imported function.\n                // func wasmExit(code int32)\n                "runtime.wasmExit": (sp) => {\n                  sp >>>= 0;\n                  const code = this.mem.getInt32(sp + 8, true);\n                  this.exited = true;\n                  delete this._inst;\n                  delete this._values;\n                  delete this._goRefCounts;\n                  delete this._ids;\n                  delete this._idPool;\n                  this.exit(code);\n                },\n                // func wasmWrite(fd uintptr, p unsafe.Pointer, n int32)\n                "runtime.wasmWrite": (sp) => {\n                  sp >>>= 0;\n                  const fd = getInt64(sp + 8);\n                  const p = getInt64(sp + 16);\n                  const n = this.mem.getInt32(sp + 24, true);\n                  globalThis.fs.writeSync(fd, new Uint8Array(this._inst.exports.mem.buffer, p, n));\n                },\n                // func resetMemoryDataView()\n                "runtime.resetMemoryDataView": (sp) => {\n                  sp >>>= 0;\n                  this.mem = new DataView(this._inst.exports.mem.buffer);\n                },\n                // func nanotime1() int64\n                "runtime.nanotime1": (sp) => {\n                  sp >>>= 0;\n                  setInt64(sp + 8, (timeOrigin + performance.now()) * 1e6);\n                },\n                // func walltime() (sec int64, nsec int32)\n                "runtime.walltime": (sp) => {\n                  sp >>>= 0;\n                  const msec = (/* @__PURE__ */ new Date()).getTime();\n                  setInt64(sp + 8, msec / 1e3);\n                  this.mem.setInt32(sp + 16, msec % 1e3 * 1e6, true);\n                },\n                // func scheduleTimeoutEvent(delay int64) int32\n                "runtime.scheduleTimeoutEvent": (sp) => {\n                  sp >>>= 0;\n                  const id = this._nextCallbackTimeoutID;\n                  this._nextCallbackTimeoutID++;\n                  this._scheduledTimeouts.set(id, setTimeout(\n                    () => {\n                      this._resume();\n                      while (this._scheduledTimeouts.has(id)) {\n                        console.warn("scheduleTimeoutEvent: missed timeout event");\n                        this._resume();\n                      }\n                    },\n                    getInt64(sp + 8) + 1\n                    // setTimeout has been seen to fire up to 1 millisecond early\n                  ));\n                  this.mem.setInt32(sp + 16, id, true);\n                },\n                // func clearTimeoutEvent(id int32)\n                "runtime.clearTimeoutEvent": (sp) => {\n                  sp >>>= 0;\n                  const id = this.mem.getInt32(sp + 8, true);\n                  clearTimeout(this._scheduledTimeouts.get(id));\n                  this._scheduledTimeouts.delete(id);\n                },\n                // func getRandomData(r []byte)\n                "runtime.getRandomData": (sp) => {\n                  sp >>>= 0;\n                  crypto.getRandomValues(loadSlice(sp + 8));\n                },\n                // func finalizeRef(v ref)\n                "syscall/js.finalizeRef": (sp) => {\n                  sp >>>= 0;\n                  const id = this.mem.getUint32(sp + 8, true);\n                  this._goRefCounts[id]--;\n                  if (this._goRefCounts[id] === 0) {\n                    const v = this._values[id];\n                    this._values[id] = null;\n                    this._ids.delete(v);\n                    this._idPool.push(id);\n                  }\n                },\n                // func stringVal(value string) ref\n                "syscall/js.stringVal": (sp) => {\n                  sp >>>= 0;\n                  storeValue(sp + 24, loadString(sp + 8));\n                },\n                // func valueGet(v ref, p string) ref\n                "syscall/js.valueGet": (sp) => {\n                  sp >>>= 0;\n                  const result = Reflect.get(loadValue(sp + 8), loadString(sp + 16));\n                  sp = this._inst.exports.getsp() >>> 0;\n                  storeValue(sp + 32, result);\n                },\n                // func valueSet(v ref, p string, x ref)\n                "syscall/js.valueSet": (sp) => {\n                  sp >>>= 0;\n                  Reflect.set(loadValue(sp + 8), loadString(sp + 16), loadValue(sp + 32));\n                },\n                // func valueDelete(v ref, p string)\n                "syscall/js.valueDelete": (sp) => {\n                  sp >>>= 0;\n                  Reflect.deleteProperty(loadValue(sp + 8), loadString(sp + 16));\n                },\n                // func valueIndex(v ref, i int) ref\n                "syscall/js.valueIndex": (sp) => {\n                  sp >>>= 0;\n                  storeValue(sp + 24, Reflect.get(loadValue(sp + 8), getInt64(sp + 16)));\n                },\n                // valueSetIndex(v ref, i int, x ref)\n                "syscall/js.valueSetIndex": (sp) => {\n                  sp >>>= 0;\n                  Reflect.set(loadValue(sp + 8), getInt64(sp + 16), loadValue(sp + 24));\n                },\n                // func valueCall(v ref, m string, args []ref) (ref, bool)\n                "syscall/js.valueCall": (sp) => {\n                  sp >>>= 0;\n                  try {\n                    const v = loadValue(sp + 8);\n                    const m = Reflect.get(v, loadString(sp + 16));\n                    const args = loadSliceOfValues(sp + 32);\n                    const result = Reflect.apply(m, v, args);\n                    sp = this._inst.exports.getsp() >>> 0;\n                    storeValue(sp + 56, result);\n                    this.mem.setUint8(sp + 64, 1);\n                  } catch (err) {\n                    sp = this._inst.exports.getsp() >>> 0;\n                    storeValue(sp + 56, err);\n                    this.mem.setUint8(sp + 64, 0);\n                  }\n                },\n                // func valueInvoke(v ref, args []ref) (ref, bool)\n                "syscall/js.valueInvoke": (sp) => {\n                  sp >>>= 0;\n                  try {\n                    const v = loadValue(sp + 8);\n                    const args = loadSliceOfValues(sp + 16);\n                    const result = Reflect.apply(v, void 0, args);\n                    sp = this._inst.exports.getsp() >>> 0;\n                    storeValue(sp + 40, result);\n                    this.mem.setUint8(sp + 48, 1);\n                  } catch (err) {\n                    sp = this._inst.exports.getsp() >>> 0;\n                    storeValue(sp + 40, err);\n                    this.mem.setUint8(sp + 48, 0);\n                  }\n                },\n                // func valueNew(v ref, args []ref) (ref, bool)\n                "syscall/js.valueNew": (sp) => {\n                  sp >>>= 0;\n                  try {\n                    const v = loadValue(sp + 8);\n                    const args = loadSliceOfValues(sp + 16);\n                    const result = Reflect.construct(v, args);\n                    sp = this._inst.exports.getsp() >>> 0;\n                    storeValue(sp + 40, result);\n                    this.mem.setUint8(sp + 48, 1);\n                  } catch (err) {\n                    sp = this._inst.exports.getsp() >>> 0;\n                    storeValue(sp + 40, err);\n                    this.mem.setUint8(sp + 48, 0);\n                  }\n                },\n                // func valueLength(v ref) int\n                "syscall/js.valueLength": (sp) => {\n                  sp >>>= 0;\n                  setInt64(sp + 16, parseInt(loadValue(sp + 8).length));\n                },\n                // valuePrepareString(v ref) (ref, int)\n                "syscall/js.valuePrepareString": (sp) => {\n                  sp >>>= 0;\n                  const str = encoder.encode(String(loadValue(sp + 8)));\n                  storeValue(sp + 16, str);\n                  setInt64(sp + 24, str.length);\n                },\n                // valueLoadString(v ref, b []byte)\n                "syscall/js.valueLoadString": (sp) => {\n                  sp >>>= 0;\n                  const str = loadValue(sp + 8);\n                  loadSlice(sp + 16).set(str);\n                },\n                // func valueInstanceOf(v ref, t ref) bool\n                "syscall/js.valueInstanceOf": (sp) => {\n                  sp >>>= 0;\n                  this.mem.setUint8(sp + 24, loadValue(sp + 8) instanceof loadValue(sp + 16) ? 1 : 0);\n                },\n                // func copyBytesToGo(dst []byte, src ref) (int, bool)\n                "syscall/js.copyBytesToGo": (sp) => {\n                  sp >>>= 0;\n                  const dst = loadSlice(sp + 8);\n                  const src = loadValue(sp + 32);\n                  if (!(src instanceof Uint8Array || src instanceof Uint8ClampedArray)) {\n                    this.mem.setUint8(sp + 48, 0);\n                    return;\n                  }\n                  const toCopy = src.subarray(0, dst.length);\n                  dst.set(toCopy);\n                  setInt64(sp + 40, toCopy.length);\n                  this.mem.setUint8(sp + 48, 1);\n                },\n                // func copyBytesToJS(dst ref, src []byte) (int, bool)\n                "syscall/js.copyBytesToJS": (sp) => {\n                  sp >>>= 0;\n                  const dst = loadValue(sp + 8);\n                  const src = loadSlice(sp + 16);\n                  if (!(dst instanceof Uint8Array || dst instanceof Uint8ClampedArray)) {\n                    this.mem.setUint8(sp + 48, 0);\n                    return;\n                  }\n                  const toCopy = src.subarray(0, dst.length);\n                  dst.set(toCopy);\n                  setInt64(sp + 40, toCopy.length);\n                  this.mem.setUint8(sp + 48, 1);\n                },\n                "debug": (value) => {\n                  console.log(value);\n                }\n              }\n            };\n          }\n          run(instance) {\n            return __async(this, null, function* () {\n              if (!(instance instanceof WebAssembly.Instance)) {\n                throw new Error("Go.run: WebAssembly.Instance expected");\n              }\n              this._inst = instance;\n              this.mem = new DataView(this._inst.exports.mem.buffer);\n              this._values = [\n                // JS values that Go currently has references to, indexed by reference id\n                NaN,\n                0,\n                null,\n                true,\n                false,\n                globalThis,\n                this\n              ];\n              this._goRefCounts = new Array(this._values.length).fill(Infinity);\n              this._ids = /* @__PURE__ */ new Map([\n                // mapping from JS values to reference ids\n                [0, 1],\n                [null, 2],\n                [true, 3],\n                [false, 4],\n                [globalThis, 5],\n                [this, 6]\n              ]);\n              this._idPool = [];\n              this.exited = false;\n              let offset = 4096;\n              const strPtr = (str) => {\n                const ptr = offset;\n                const bytes = encoder.encode(str + "\\0");\n                new Uint8Array(this.mem.buffer, offset, bytes.length).set(bytes);\n                offset += bytes.length;\n                if (offset % 8 !== 0) {\n                  offset += 8 - offset % 8;\n                }\n                return ptr;\n              };\n              const argc = this.argv.length;\n              const argvPtrs = [];\n              this.argv.forEach((arg) => {\n                argvPtrs.push(strPtr(arg));\n              });\n              argvPtrs.push(0);\n              const keys = Object.keys(this.env).sort();\n              keys.forEach((key) => {\n                argvPtrs.push(strPtr(`${key}=${this.env[key]}`));\n              });\n              argvPtrs.push(0);\n              const argv = offset;\n              argvPtrs.forEach((ptr) => {\n                this.mem.setUint32(offset, ptr, true);\n                this.mem.setUint32(offset + 4, 0, true);\n                offset += 8;\n              });\n              const wasmMinDataAddr = 4096 + 8192;\n              if (offset >= wasmMinDataAddr) {\n                throw new Error("total length of command line and environment variables exceeds limit");\n              }\n              this._inst.exports.run(argc, argv);\n              if (this.exited) {\n                this._resolveExitPromise();\n              }\n              yield this._exitPromise;\n            });\n          }\n          _resume() {\n            if (this.exited) {\n              throw new Error("Go program has already exited");\n            }\n            this._inst.exports.resume();\n            if (this.exited) {\n              this._resolveExitPromise();\n            }\n          }\n          _makeFuncWrapper(id) {\n            const go = this;\n            return function() {\n              const event = { id, this: this, args: arguments };\n              go._pendingEvent = event;\n              go._resume();\n              return event.result;\n            };\n          }\n        };\n      })();\n      onmessage = ({ data: wasm }) => {\n        let decoder = new TextDecoder();\n        let fs = globalThis.fs;\n        let stderr = "";\n        fs.writeSync = (fd, buffer) => {\n          if (fd === 1) {\n            postMessage(buffer);\n          } else if (fd === 2) {\n            stderr += decoder.decode(buffer);\n            let parts = stderr.split("\\n");\n            if (parts.length > 1)\n              console.log(parts.slice(0, -1).join("\\n"));\n            stderr = parts[parts.length - 1];\n          } else {\n            throw new Error("Bad write");\n          }\n          return buffer.length;\n        };\n        let stdin = [];\n        let resumeStdin;\n        let stdinPos = 0;\n        onmessage = ({ data }) => {\n          if (data.length > 0) {\n            stdin.push(data);\n            if (resumeStdin)\n              resumeStdin();\n          }\n        };\n        fs.read = (fd, buffer, offset, length, position, callback) => {\n          if (fd !== 0 || offset !== 0 || length !== buffer.length || position !== null) {\n            throw new Error("Bad read");\n          }\n          if (stdin.length === 0) {\n            resumeStdin = () => fs.read(fd, buffer, offset, length, position, callback);\n            return;\n          }\n          let first = stdin[0];\n          let count = Math.max(0, Math.min(length, first.length - stdinPos));\n          buffer.set(first.subarray(stdinPos, stdinPos + count), offset);\n          stdinPos += count;\n          if (stdinPos === first.length) {\n            stdin.shift();\n            stdinPos = 0;\n          }\n          callback(null, count);\n        };\n        let go = new globalThis.Go();\n        go.argv = ["", `--service=${"0.18.7"}`];\n        tryToInstantiateModule(wasm, go).then(\n          (instance) => {\n            postMessage(null);\n            go.run(instance);\n          },\n          (error) => {\n            postMessage(error);\n          }\n        );\n      };\n      function tryToInstantiateModule(wasm, go) {\n        return __async(this, null, function* () {\n          if (wasm instanceof WebAssembly.Module) {\n            return WebAssembly.instantiate(wasm, go.importObject);\n          }\n          const res = yield fetch(wasm);\n          if (!res.ok)\n            throw new Error(`Failed to download ${JSON.stringify(wasm)}`);\n          if ("instantiateStreaming" in WebAssembly && /^application\\/wasm($|;)/i.test(res.headers.get("Content-Type") || "")) {\n            const result2 = yield WebAssembly.instantiateStreaming(res, go.importObject);\n            return result2.instance;\n          }\n          const bytes = yield res.arrayBuffer();\n          const result = yield WebAssembly.instantiate(bytes, go.importObject);\n          return result.instance;\n        });\n      }\n      return (m) => onmessage(m);\n    })(postMessage)'],{type:"text/javascript"});s=new Worker(URL.createObjectURL(e))}else{let e=(e=>{var t=(e,t,n)=>new Promise(((s,r)=>{var i=e=>{try{l(n.next(e))}catch(t){r(t)}},a=e=>{try{l(n.throw(e))}catch(t){r(t)}},l=e=>e.done?s(e.value):Promise.resolve(e.value).then(i,a);l((n=n.apply(e,t)).next())}));let n,s={};for(let r=self;r;r=Object.getPrototypeOf(r))for(let e of Object.getOwnPropertyNames(r))e in s||Object.defineProperty(s,e,{get:()=>self[e]});return(()=>{const e=()=>{const e=new Error("not implemented");return e.code="ENOSYS",e};if(!s.fs){let t="";s.fs={constants:{O_WRONLY:-1,O_RDWR:-1,O_CREAT:-1,O_TRUNC:-1,O_APPEND:-1,O_EXCL:-1},writeSync(e,n){t+=r.decode(n);const s=t.lastIndexOf("\n");return-1!=s&&(t=t.substring(s+1)),n.length},write(t,n,s,r,i,a){0===s&&r===n.length&&null===i?a(null,this.writeSync(t,n)):a(e())},chmod(t,n,s){s(e())},chown(t,n,s,r){r(e())},close(t,n){n(e())},fchmod(t,n,s){s(e())},fchown(t,n,s,r){r(e())},fstat(t,n){n(e())},fsync(e,t){t(null)},ftruncate(t,n,s){s(e())},lchown(t,n,s,r){r(e())},link(t,n,s){s(e())},lstat(t,n){n(e())},mkdir(t,n,s){s(e())},open(t,n,s,r){r(e())},read(t,n,s,r,i,a){a(e())},readdir(t,n){n(e())},readlink(t,n){n(e())},rename(t,n,s){s(e())},rmdir(t,n){n(e())},stat(t,n){n(e())},symlink(t,n,s){s(e())},truncate(t,n,s){s(e())},unlink(t,n){n(e())},utimes(t,n,s,r){r(e())}}}if(s.process||(s.process={getuid:()=>-1,getgid:()=>-1,geteuid:()=>-1,getegid:()=>-1,getgroups(){throw e()},pid:-1,ppid:-1,umask(){throw e()},cwd(){throw e()},chdir(){throw e()}}),!s.crypto)throw new Error("globalThis.crypto is not available, polyfill required (crypto.getRandomValues only)");if(!s.performance)throw new Error("globalThis.performance is not available, polyfill required (performance.now only)");if(!s.TextEncoder)throw new Error("globalThis.TextEncoder is not available, polyfill required");if(!s.TextDecoder)throw new Error("globalThis.TextDecoder is not available, polyfill required");const n=new TextEncoder("utf-8"),r=new TextDecoder("utf-8");s.Go=class{constructor(){this.argv=["js"],this.env={},this.exit=e=>{},this._exitPromise=new Promise((e=>{this._resolveExitPromise=e})),this._pendingEvent=null,this._scheduledTimeouts=new Map,this._nextCallbackTimeoutID=1;const e=(e,t)=>{this.mem.setUint32(e+0,t,!0),this.mem.setUint32(e+4,Math.floor(t/4294967296),!0)},t=e=>this.mem.getUint32(e+0,!0)+4294967296*this.mem.getInt32(e+4,!0),i=e=>{const t=this.mem.getFloat64(e,!0);if(0===t)return;if(!isNaN(t))return t;const n=this.mem.getUint32(e,!0);return this._values[n]},a=(e,t)=>{const n=2146959360;if("number"==typeof t&&0!==t)return isNaN(t)?(this.mem.setUint32(e+4,n,!0),void this.mem.setUint32(e,0,!0)):void this.mem.setFloat64(e,t,!0);if(void 0===t)return void this.mem.setFloat64(e,0,!0);let s=this._ids.get(t);void 0===s&&(s=this._idPool.pop(),void 0===s&&(s=this._values.length),this._values[s]=t,this._goRefCounts[s]=0,this._ids.set(t,s)),this._goRefCounts[s]++;let r=0;switch(typeof t){case"object":null!==t&&(r=1);break;case"string":r=2;break;case"symbol":r=3;break;case"function":r=4}this.mem.setUint32(e+4,n|r,!0),this.mem.setUint32(e,s,!0)},l=e=>{const n=t(e+0),s=t(e+8);return new Uint8Array(this._inst.exports.mem.buffer,n,s)},o=e=>{const n=t(e+0),s=t(e+8),r=new Array(s);for(let t=0;t<s;t++)r[t]=i(n+8*t);return r},c=e=>{const n=t(e+0),s=t(e+8);return r.decode(new DataView(this._inst.exports.mem.buffer,n,s))},d=Date.now()-performance.now();this.importObject={go:{"runtime.wasmExit":e=>{e>>>=0;const t=this.mem.getInt32(e+8,!0);this.exited=!0,delete this._inst,delete this._values,delete this._goRefCounts,delete this._ids,delete this._idPool,this.exit(t)},"runtime.wasmWrite":e=>{const n=t((e>>>=0)+8),r=t(e+16),i=this.mem.getInt32(e+24,!0);s.fs.writeSync(n,new Uint8Array(this._inst.exports.mem.buffer,r,i))},"runtime.resetMemoryDataView":e=>{this.mem=new DataView(this._inst.exports.mem.buffer)},"runtime.nanotime1":t=>{e((t>>>=0)+8,1e6*(d+performance.now()))},"runtime.walltime":t=>{t>>>=0;const n=(new Date).getTime();e(t+8,n/1e3),this.mem.setInt32(t+16,n%1e3*1e6,!0)},"runtime.scheduleTimeoutEvent":e=>{e>>>=0;const n=this._nextCallbackTimeoutID;this._nextCallbackTimeoutID++,this._scheduledTimeouts.set(n,setTimeout((()=>{for(this._resume();this._scheduledTimeouts.has(n);)this._resume()}),t(e+8)+1)),this.mem.setInt32(e+16,n,!0)},"runtime.clearTimeoutEvent":e=>{e>>>=0;const t=this.mem.getInt32(e+8,!0);clearTimeout(this._scheduledTimeouts.get(t)),this._scheduledTimeouts.delete(t)},"runtime.getRandomData":e=>{e>>>=0,crypto.getRandomValues(l(e+8))},"syscall/js.finalizeRef":e=>{e>>>=0;const t=this.mem.getUint32(e+8,!0);if(this._goRefCounts[t]--,0===this._goRefCounts[t]){const e=this._values[t];this._values[t]=null,this._ids.delete(e),this._idPool.push(t)}},"syscall/js.stringVal":e=>{a((e>>>=0)+24,c(e+8))},"syscall/js.valueGet":e=>{e>>>=0;const t=Reflect.get(i(e+8),c(e+16));e=this._inst.exports.getsp()>>>0,a(e+32,t)},"syscall/js.valueSet":e=>{e>>>=0,Reflect.set(i(e+8),c(e+16),i(e+32))},"syscall/js.valueDelete":e=>{e>>>=0,Reflect.deleteProperty(i(e+8),c(e+16))},"syscall/js.valueIndex":e=>{a((e>>>=0)+24,Reflect.get(i(e+8),t(e+16)))},"syscall/js.valueSetIndex":e=>{e>>>=0,Reflect.set(i(e+8),t(e+16),i(e+24))},"syscall/js.valueCall":e=>{e>>>=0;try{const t=i(e+8),n=Reflect.get(t,c(e+16)),s=o(e+32),r=Reflect.apply(n,t,s);e=this._inst.exports.getsp()>>>0,a(e+56,r),this.mem.setUint8(e+64,1)}catch(t){e=this._inst.exports.getsp()>>>0,a(e+56,t),this.mem.setUint8(e+64,0)}},"syscall/js.valueInvoke":e=>{e>>>=0;try{const t=i(e+8),n=o(e+16),s=Reflect.apply(t,void 0,n);e=this._inst.exports.getsp()>>>0,a(e+40,s),this.mem.setUint8(e+48,1)}catch(t){e=this._inst.exports.getsp()>>>0,a(e+40,t),this.mem.setUint8(e+48,0)}},"syscall/js.valueNew":e=>{e>>>=0;try{const t=i(e+8),n=o(e+16),s=Reflect.construct(t,n);e=this._inst.exports.getsp()>>>0,a(e+40,s),this.mem.setUint8(e+48,1)}catch(t){e=this._inst.exports.getsp()>>>0,a(e+40,t),this.mem.setUint8(e+48,0)}},"syscall/js.valueLength":t=>{e((t>>>=0)+16,parseInt(i(t+8).length))},"syscall/js.valuePrepareString":t=>{t>>>=0;const s=n.encode(String(i(t+8)));a(t+16,s),e(t+24,s.length)},"syscall/js.valueLoadString":e=>{const t=i((e>>>=0)+8);l(e+16).set(t)},"syscall/js.valueInstanceOf":e=>{e>>>=0,this.mem.setUint8(e+24,i(e+8)instanceof i(e+16)?1:0)},"syscall/js.copyBytesToGo":t=>{const n=l((t>>>=0)+8),s=i(t+32);if(!(s instanceof Uint8Array||s instanceof Uint8ClampedArray))return void this.mem.setUint8(t+48,0);const r=s.subarray(0,n.length);n.set(r),e(t+40,r.length),this.mem.setUint8(t+48,1)},"syscall/js.copyBytesToJS":t=>{const n=i((t>>>=0)+8),s=l(t+16);if(!(n instanceof Uint8Array||n instanceof Uint8ClampedArray))return void this.mem.setUint8(t+48,0);const r=s.subarray(0,n.length);n.set(r),e(t+40,r.length),this.mem.setUint8(t+48,1)},debug:e=>{}}}}run(e){return t(this,null,(function*(){if(!(e instanceof WebAssembly.Instance))throw new Error("Go.run: WebAssembly.Instance expected");this._inst=e,this.mem=new DataView(this._inst.exports.mem.buffer),this._values=[NaN,0,null,!0,!1,s,this],this._goRefCounts=new Array(this._values.length).fill(1/0),this._ids=new Map([[0,1],[null,2],[!0,3],[!1,4],[s,5],[this,6]]),this._idPool=[],this.exited=!1;let t=4096;const r=e=>{const s=t,r=n.encode(e+"\0");return new Uint8Array(this.mem.buffer,t,r.length).set(r),t+=r.length,t%8!=0&&(t+=8-t%8),s},i=this.argv.length,a=[];this.argv.forEach((e=>{a.push(r(e))})),a.push(0),Object.keys(this.env).sort().forEach((e=>{a.push(r(`${e}=${this.env[e]}`))})),a.push(0);const l=t;if(a.forEach((e=>{this.mem.setUint32(t,e,!0),this.mem.setUint32(t+4,0,!0),t+=8})),t>=12288)throw new Error("total length of command line and environment variables exceeds limit");this._inst.exports.run(i,l),this.exited&&this._resolveExitPromise(),yield this._exitPromise}))}_resume(){if(this.exited)throw new Error("Go program has already exited");this._inst.exports.resume(),this.exited&&this._resolveExitPromise()}_makeFuncWrapper(e){const t=this;return function(){const n={id:e,this:this,args:arguments};return t._pendingEvent=n,t._resume(),n.result}}}})(),n=({data:r})=>{let i=new TextDecoder,a=s.fs,l="";a.writeSync=(t,n)=>{if(1===t)e(n);else{if(2!==t)throw new Error("Bad write");{l+=i.decode(n);let e=l.split("\n");e.length,l=e[e.length-1]}}return n.length};let o,c=[],d=0;n=({data:e})=>{e.length>0&&(c.push(e),o&&o())},a.read=(e,t,n,s,r,i)=>{if(0!==e||0!==n||s!==t.length||null!==r)throw new Error("Bad read");if(0===c.length)return void(o=()=>a.read(e,t,n,s,r,i));let l=c[0],u=Math.max(0,Math.min(s,l.length-d));t.set(l.subarray(d,d+u),n),d+=u,d===l.length&&(c.shift(),d=0),i(null,u)};let u=new s.Go;u.argv=["","--service=0.18.7"],function(e,n){return t(this,null,(function*(){if(e instanceof WebAssembly.Module)return WebAssembly.instantiate(e,n.importObject);const t=yield fetch(e);if(!t.ok)throw new Error(`Failed to download ${JSON.stringify(e)}`);if("instantiateStreaming"in WebAssembly&&/^application\/wasm($|;)/i.test(t.headers.get("Content-Type")||""))return(yield WebAssembly.instantiateStreaming(t,n.importObject)).instance;const s=yield t.arrayBuffer();return(yield WebAssembly.instantiate(s,n.importObject)).instance}))}(r,u).then((t=>{e(null),u.run(t)}),(t=>{e(t)}))},e=>n(e)})((e=>s.onmessage({data:e})));s={onmessage:null,postMessage:t=>setTimeout((()=>e({data:t}))),terminate(){}}}const a=new Promise(((e,t)=>{r=e,i=t}));s.onmessage=({data:e})=>{s.onmessage=({data:e})=>o(e),e?i(e):r()},s.postMessage(t||new URL(e,location.href).toString());let{readFromStdout:o,service:c}=U({writeToStdin(e){s.postMessage(e)},isSync:!1,hasFS:!1,esbuild:l});yield a,ee={build:e=>new Promise(((t,n)=>c.buildOrContext({callName:"build",refs:null,options:e,isTTY:!1,defaultWD:"/",callback:(e,s)=>e?n(e):t(s)}))),context:e=>new Promise(((t,n)=>c.buildOrContext({callName:"context",refs:null,options:e,isTTY:!1,defaultWD:"/",callback:(e,s)=>e?n(e):t(s)}))),transform:(e,t)=>new Promise(((n,s)=>c.transform({callName:"transform",refs:null,input:e,options:t||{},isTTY:!1,fs:{readFile(e,t){t(new Error("Internal error"),null)},writeFile(e,t){t(null)}},callback:(e,t)=>e?s(e):n(t)}))),formatMessages:(e,t)=>new Promise(((n,s)=>c.formatMessages({callName:"formatMessages",refs:null,messages:e,options:t,callback:(e,t)=>e?s(e):n(t)}))),analyzeMetafile:(e,t)=>new Promise(((n,s)=>c.analyzeMetafile({callName:"analyzeMetafile",refs:null,metafile:"string"==typeof e?e:JSON.stringify(e),options:t,callback:(e,t)=>e?s(e):n(t)})))}})),pe=l})($t);var It=$t.exports;function Dt(e){if("string"!=typeof e)throw new TypeError("Path must be a string. Received "+JSON.stringify(e))}function At(e,t){for(var n,s="",r=0,i=-1,a=0,l=0;l<=e.length;++l){if(l<e.length)n=e.charCodeAt(l);else{if(47===n)break;n=47}if(47===n){if(i===l-1||1===a);else if(i!==l-1&&2===a){if(s.length<2||2!==r||46!==s.charCodeAt(s.length-1)||46!==s.charCodeAt(s.length-2))if(s.length>2){var o=s.lastIndexOf("/");if(o!==s.length-1){-1===o?(s="",r=0):r=(s=s.slice(0,o)).length-1-s.lastIndexOf("/"),i=l,a=0;continue}}else if(2===s.length||1===s.length){s="",r=0,i=l,a=0;continue}t&&(s.length>0?s+="/..":s="..",r=2)}else s.length>0?s+="/"+e.slice(i+1,l):s=e.slice(i+1,l),r=l-i-1;i=l,a=0}else 46===n&&-1!==a?++a:a=-1}return s}var Rt={resolve:function(){for(var e,t="",n=!1,s=arguments.length-1;s>=-1&&!n;s--){var r;s>=0?r=arguments[s]:(void 0===e&&(e=process.cwd()),r=e),Dt(r),0!==r.length&&(t=r+"/"+t,n=47===r.charCodeAt(0))}return t=At(t,!n),n?t.length>0?"/"+t:"/":t.length>0?t:"."},normalize:function(e){if(Dt(e),0===e.length)return".";var t=47===e.charCodeAt(0),n=47===e.charCodeAt(e.length-1);return 0!==(e=At(e,!t)).length||t||(e="."),e.length>0&&n&&(e+="/"),t?"/"+e:e},isAbsolute:function(e){return Dt(e),e.length>0&&47===e.charCodeAt(0)},join:function(){if(0===arguments.length)return".";for(var e,t=0;t<arguments.length;++t){var n=arguments[t];Dt(n),n.length>0&&(void 0===e?e=n:e+="/"+n)}return void 0===e?".":Rt.normalize(e)},relative:function(e,t){if(Dt(e),Dt(t),e===t)return"";if((e=Rt.resolve(e))===(t=Rt.resolve(t)))return"";for(var n=1;n<e.length&&47===e.charCodeAt(n);++n);for(var s=e.length,r=s-n,i=1;i<t.length&&47===t.charCodeAt(i);++i);for(var a=t.length-i,l=r<a?r:a,o=-1,c=0;c<=l;++c){if(c===l){if(a>l){if(47===t.charCodeAt(i+c))return t.slice(i+c+1);if(0===c)return t.slice(i+c)}else r>l&&(47===e.charCodeAt(n+c)?o=c:0===c&&(o=0));break}var d=e.charCodeAt(n+c);if(d!==t.charCodeAt(i+c))break;47===d&&(o=c)}var u="";for(c=n+o+1;c<=s;++c)c!==s&&47!==e.charCodeAt(c)||(0===u.length?u+="..":u+="/..");return u.length>0?u+t.slice(i+o):(i+=o,47===t.charCodeAt(i)&&++i,t.slice(i))},_makeLong:function(e){return e},dirname:function(e){if(Dt(e),0===e.length)return".";for(var t=e.charCodeAt(0),n=47===t,s=-1,r=!0,i=e.length-1;i>=1;--i)if(47===(t=e.charCodeAt(i))){if(!r){s=i;break}}else r=!1;return-1===s?n?"/":".":n&&1===s?"//":e.slice(0,s)},basename:function(e,t){if(void 0!==t&&"string"!=typeof t)throw new TypeError('"ext" argument must be a string');Dt(e);var n,s=0,r=-1,i=!0;if(void 0!==t&&t.length>0&&t.length<=e.length){if(t.length===e.length&&t===e)return"";var a=t.length-1,l=-1;for(n=e.length-1;n>=0;--n){var o=e.charCodeAt(n);if(47===o){if(!i){s=n+1;break}}else-1===l&&(i=!1,l=n+1),a>=0&&(o===t.charCodeAt(a)?-1===--a&&(r=n):(a=-1,r=l))}return s===r?r=l:-1===r&&(r=e.length),e.slice(s,r)}for(n=e.length-1;n>=0;--n)if(47===e.charCodeAt(n)){if(!i){s=n+1;break}}else-1===r&&(i=!1,r=n+1);return-1===r?"":e.slice(s,r)},extname:function(e){Dt(e);for(var t=-1,n=0,s=-1,r=!0,i=0,a=e.length-1;a>=0;--a){var l=e.charCodeAt(a);if(47!==l)-1===s&&(r=!1,s=a+1),46===l?-1===t?t=a:1!==i&&(i=1):-1!==t&&(i=-1);else if(!r){n=a+1;break}}return-1===t||-1===s||0===i||1===i&&t===s-1&&t===n+1?"":e.slice(t,s)},format:function(e){if(null===e||"object"!=typeof e)throw new TypeError('The "pathObject" argument must be of type Object. Received type '+typeof e);return function(e,t){var n=t.dir||t.root,s=t.base||(t.name||"")+(t.ext||"");return n?n===t.root?n+s:n+e+s:s}("/",e)},parse:function(e){Dt(e);var t={root:"",dir:"",base:"",ext:"",name:""};if(0===e.length)return t;var n,s=e.charCodeAt(0),r=47===s;r?(t.root="/",n=1):n=0;for(var i=-1,a=0,l=-1,o=!0,c=e.length-1,d=0;c>=n;--c)if(47!==(s=e.charCodeAt(c)))-1===l&&(o=!1,l=c+1),46===s?-1===i?i=c:1!==d&&(d=1):-1!==i&&(d=-1);else if(!o){a=c+1;break}return-1===i||-1===l||0===d||1===d&&i===l-1&&i===a+1?-1!==l&&(t.base=t.name=0===a&&r?e.slice(1,l):e.slice(a,l)):(0===a&&r?(t.name=e.slice(1,i),t.base=e.slice(1,l)):(t.name=e.slice(a,i),t.base=e.slice(a,l)),t.ext=e.slice(i,l)),a>0?t.dir=e.slice(0,a-1):r&&(t.dir="/"),t},sep:"/",delimiter:":",win32:null,posix:null};Rt.posix=Rt;const Ot=x(Rt);let Ft=!1,Vt=null;const Bt={},Mt=async()=>(Vt||(Vt=It.initialize({wasmURL:"https://unpkg.com/esbuild-wasm@0.18.7/esbuild.wasm"}).then((()=>(Ft=!0,Ft))).catch((e=>{if(e instanceof Error&&e.message.includes("initialize")&&e.message.includes("once"))return Ft=!0,Ft;throw e}))),Vt),Ut=async({entryPoint:e,content:t,options:n})=>{await Mt(),Bt["node_modules/react/index.js"]||await Wt();try{Bt[e]={contents:t,loader:e.endsWith(".jsx")||e.endsWith(".tsx")?"jsx":e.endsWith(".css")?"css":"js"};const s={name:"css-inject",setup(e){e.onLoad({filter:/\.css$/,namespace:"virtual-fs"},(async e=>{const t=Bt[e.path];if(!t)throw new Error(`CSS file not found in virtual filesystem: ${e.path}`);const n=t.contents,s=`injected-style-${e.path.replace(/[^a-zA-Z0-9]/g,"-")}`;return{contents:`\n              // CSS module: ${e.path}\n              (function() {\n                if (typeof document !== 'undefined') {\n                  const existingStyle = document.getElementById('${s}');\n                  if (existingStyle) existingStyle.remove();\n                  const style = document.createElement('style');\n                  style.id = '${s}';\n                  style.textContent = ${JSON.stringify(n)};\n                  document.head.appendChild(style);\n                }\n              })();\n              export default {};\n            `,loader:"js"}}))}},r={name:"virtual-file-system",setup(n){n.onResolve({filter:new RegExp(`^${e}$`)},(e=>({path:e.path,namespace:"virtual-fs"}))),n.onResolve({filter:/^\.+\//,namespace:"virtual-fs"},(e=>{const t=Ot.posix.join(Ot.posix.dirname(e.importer),e.path);return t.endsWith(".css")||Bt[t]?{path:t,namespace:"virtual-fs"}:{path:`https://unpkg.com/${t}`,namespace:"http-url"}})),n.onResolve({filter:/^[^./].*/,namespace:"virtual-fs"},(e=>{const t=e.path;if("react"===t){const e="node_modules/react/index.js";if(Bt[e])return{path:e,namespace:"virtual-fs"}}if("react-dom/client"===t){const e="node_modules/react-dom/client.js";if(Bt[e])return{path:e,namespace:"virtual-fs"}}if("react-dom"===t){const e="node_modules/react-dom/index.js";if(Bt[e])return{path:e,namespace:"virtual-fs"}}const n=`node_modules/${t}.js`;if(Bt[n])return{path:n,namespace:"virtual-fs"};const s=`node_modules/${t}/index.js`;return Bt[s]?{path:s,namespace:"virtual-fs"}:{path:`https://unpkg.com/${t}`,namespace:"http-url"}})),n.onResolve({filter:/.*/,namespace:"virtual-fs"},(e=>{if(e.path.startsWith(".")||"virtual-fs"!==e.namespace)return;const t=e.path;if("react"===t||"react-dom"===t||"scheduler"===t){const e=`node_modules/${t}/index.js`;if(Bt[e])return{path:e,namespace:"virtual-fs"}}if(e.path.startsWith("./")&&e.importer.includes("node_modules")){const t=`${e.importer.replace(/\/[^/]+$/,"")}/${e.path.substring(2)}`;if(Bt[t])return{path:t,namespace:"virtual-fs"}}})),n.onResolve({filter:/.*/,namespace:"http-url"},(e=>{if(!e.path.startsWith(".")&&!e.path.startsWith("/"))return{path:`https://unpkg.com/${e.path}`,namespace:"http-url"};const t=e.importer.endsWith("/")?e.importer:`${e.importer}/`;return{path:new URL(e.path,t).href,namespace:"http-url"}})),n.onLoad({filter:/.*/,namespace:"virtual-fs"},(async n=>{if(Bt[n.path])return{contents:Bt[n.path].contents,loader:Bt[n.path].loader};if(n.path===e)return{contents:t,loader:e.endsWith(".jsx")||e.endsWith(".tsx")?"jsx":e.endsWith(".css")?"css":"js"};if(n.path.endsWith(".css"))throw new Error(`CSS file not found: ${n.path}. Make sure to add it to the virtual filesystem.`);throw new Error(`File not found in virtual filesystem: ${n.path}`)})),n.onLoad({filter:/.*/,namespace:"http-url"},(async e=>{const t=await fetch(e.path),n=await t.text();let s="js";return e.path.match(/\.(jsx|tsx)$/)?s="jsx":e.path.endsWith(".css")?s="css":e.path.endsWith(".json")?s="json":e.path.endsWith(".txt")&&(s="text"),{contents:n,loader:s,resolveDir:e.path.replace(/\/[^/]+$/,"/")}}))}},i=await It.build({entryPoints:[e],bundle:void 0===n.bundle||n.bundle,minify:void 0!==n.minify&&n.minify,format:n.format||"iife",target:n.target||"es2015",jsxFactory:n.jsxFactory||"React.createElement",jsxFragment:n.jsxFragment||"React.Fragment",external:n.external||[],write:!1,plugins:[s,r],define:{"process.env.NODE_ENV":'"development"'}});return{code:i.outputFiles?i.outputFiles[0].text:"",error:null}}catch(s){return{code:"",error:s instanceof Error?s.message:String(s)}}},Lt=(e,t)=>{let n="js";e.match(/\.(jsx|tsx)$/)?n="jsx":e.endsWith(".css")?n="css":e.endsWith(".json")?n="json":e.endsWith(".txt")&&(n="text"),Bt[e]={contents:t,loader:n}},Wt=async()=>{try{const t="/portfolio/shadow/node_modules/",n=["react/index.js","react/cjs/react.development.js","react/cjs/react.production.min.js","react-dom/index.js","react-dom/client.js","react-dom/cjs/react-dom.development.js","react-dom/cjs/react-dom.production.min.js","react-dom/cjs/react-dom-client.development.js","react-dom/cjs/react-dom-client.production.min.js","scheduler/index.js","scheduler/cjs/scheduler.development.js","scheduler/cjs/scheduler.production.min.js"];for(const s of n)try{const e=await fetch(`${t}${s}`);if(e.ok){const t=await e.text();Lt(`node_modules/${s}`,t)}}catch(e){}}catch(e){}},zt=e=>{try{const t=e.split(" ");if("esbuild"!==t[0])return null;const n=t[1],s={bundle:!1,minify:!1,format:"iife",jsxFactory:"React.createElement",jsxFragment:"React.Fragment"};for(let e=2;e<t.length;e++){const n=t[e];if("--bundle"===n)s.bundle=!0;else if("--minify"===n)s.minify=!0;else if(n.startsWith("--format=")){const e=n.split("=")[1];s.format=e}else if(n.startsWith("--target="))s.target=n.split("=")[1];else if(n.startsWith("--jsx-factory="))s.jsxFactory=n.split("=")[1];else if(n.startsWith("--jsx-fragment="))s.jsxFragment=n.split("=")[1];else if(n.startsWith("--external:")){const e=n.split(":")[1].split(",");s.external||(s.external=[]),s.external.push(...e)}}return{entryPoint:n,content:"",options:s}}catch(t){return null}},Gt=Object.freeze(Object.defineProperty({__proto__:null,addToVirtualFs:Lt,buildCode:Ut,initializeEsbuild:Mt,loadReactModules:Wt,parseEsbuildCommand:zt},Symbol.toStringTag,{value:"Module"}));function qt(...e){return w(j(e))}export{Pt as ActivityBar,Pe as CommandPalette,Be as EditorArea,Oe as HybrideStartScreen,Ye as IdeLayout,Ve as PreviewPanel,Ue as SideBar,Je as StatusBar,N as VirtualFS,Lt as addToVirtualFs,Ut as buildCode,qt as cn,Qe as default,Mt as initializeEsbuild,Wt as loadReactModules,zt as parseEsbuildCommand,Te as useIdeStore,E as virtualFs};
